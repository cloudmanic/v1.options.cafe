//
// Date: 2/23/2017
// Author(s): Spicer Matthews (spicer@options.cafe)
// Copyright: 2017 Cloudmanic Labs, LLC. All rights reserved.
//

package tradier

import (
	"testing"
	"time"

	"github.com/nbio/st"
	gock "gopkg.in/h2non/gock.v1"
)

//
// Test - GetHistoricalQuotes
//
func TestGetHistoricalQuotes01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New(apiBaseUrl).
		Get("/markets/history").
		Reply(200).
		BodyString(`{"history":{"day":[{"date":"2018-01-02","open":267.84,"high":268.81,"low":267.4,"close":268.77,"volume":86631393},{"date":"2018-01-03","open":268.96,"high":270.64,"low":268.96,"close":270.47,"volume":90054249},{"date":"2018-01-04","open":271.2,"high":272.16,"low":270.5447,"close":271.61,"volume":80624896},{"date":"2018-01-05","open":272.51,"high":273.56,"low":271.95,"close":273.42,"volume":83522436},{"date":"2018-01-08","open":273.31,"high":274.1,"low":272.98,"close":273.92,"volume":57310300},{"date":"2018-01-09","open":274.4,"high":275.25,"low":274.081,"close":274.54,"volume":57245653},{"date":"2018-01-10","open":273.68,"high":274.42,"low":272.92,"close":274.12,"volume":69543174},{"date":"2018-01-11","open":274.75,"high":276.12,"low":274.56,"close":276.12,"volume":62357781},{"date":"2018-01-12","open":276.42,"high":278.11,"low":276.0819,"close":277.92,"volume":90807258},{"date":"2018-01-16","open":279.35,"high":280.09,"low":276.18,"close":276.97,"volume":106532827},{"date":"2018-01-17","open":278.03,"high":280.05,"low":276.97,"close":279.61,"volume":113242394},{"date":"2018-01-18","open":279.48,"high":279.96,"low":278.58,"close":279.14,"volume":100723726},{"date":"2018-01-19","open":279.8,"high":280.41,"low":279.14,"close":280.41,"volume":140912870},{"date":"2018-01-22","open":280.17,"high":282.69,"low":280.11,"close":282.69,"volume":91302336},{"date":"2018-01-23","open":282.74,"high":283.62,"low":282.37,"close":283.29,"volume":97073068},{"date":"2018-01-24","open":284.02,"high":284.7,"low":281.84,"close":283.18,"volume":134821100},{"date":"2018-01-25","open":284.16,"high":284.27,"low":282.405,"close":283.3,"volume":84573237},{"date":"2018-01-26","open":284.25,"high":286.6285,"low":283.96,"close":286.58,"volume":107729783},{"date":"2018-01-29","open":285.93,"high":286.43,"low":284.5,"close":284.68,"volume":90100642},{"date":"2018-01-30","open":282.6,"high":284.736,"low":281.22,"close":281.76,"volume":131751380},{"date":"2018-01-31","open":282.73,"high":283.3,"low":280.68,"close":281.9,"volume":118923457},{"date":"2018-02-01","open":281.07,"high":283.06,"low":280.68,"close":281.58,"volume":90083692},{"date":"2018-02-02","open":280.08,"high":280.23,"low":275.41,"close":275.45,"volume":173164270},{"date":"2018-02-05","open":273.45,"high":275.85,"low":263.31,"close":263.93,"volume":294568480},{"date":"2018-02-06","open":259.94,"high":269.7,"low":258.7,"close":269.13,"volume":355018200},{"date":"2018-02-07","open":268.5,"high":272.36,"low":267.58,"close":267.67,"volume":167241140},{"date":"2018-02-08","open":268.01,"high":268.17,"low":257.59,"close":257.63,"volume":246397060},{"date":"2018-02-09","open":260.8,"high":263.61,"low":252.92,"close":261.5,"volume":283490830},{"date":"2018-02-12","open":263.83,"high":267.01,"low":261.6644,"close":265.34,"volume":143725730},{"date":"2018-02-13","open":263.97,"high":266.62,"low":263.31,"close":266.0,"volume":81210909},{"date":"2018-02-14","open":264.31,"high":270.0,"low":264.3,"close":269.59,"volume":120683003},{"date":"2018-02-15","open":271.57,"high":273.04,"low":268.77,"close":273.03,"volume":111174904},{"date":"2018-02-16","open":272.32,"high":275.32,"low":272.27,"close":273.11,"volume":160417710},{"date":"2018-02-20","open":272.03,"high":273.67,"low":270.5,"close":271.4,"volume":86285058},{"date":"2018-02-21","open":271.9,"high":274.72,"low":269.94,"close":270.05,"volume":98714168},{"date":"2018-02-22","open":271.1,"high":273.05,"low":269.64,"close":270.4,"volume":110433492},{"date":"2018-02-23","open":271.79,"high":274.71,"low":271.25,"close":274.71,"volume":92753578}]}}`)

	// Create new tradier instance
	tradier := &Api{}

	// Send API call.
	start := time.Date(2018, 01, 01, 0, 0, 0, 0, time.UTC)
	end := time.Date(2018, 02, 23, 0, 0, 0, 0, time.UTC)
	quotes, err := tradier.GetHistoricalQuotes("SPY", start, end, "daily")

	// Verify the data was return as expected
	st.Expect(t, err, nil)
	st.Expect(t, len(quotes), 37)
	st.Expect(t, quotes[0].Date.Format("2006-01-02"), "2018-01-02")
	st.Expect(t, quotes[0].Open, 267.84)
	st.Expect(t, quotes[0].High, 268.81)
	st.Expect(t, quotes[0].Low, 267.4)
	st.Expect(t, quotes[0].Close, 268.77)
	st.Expect(t, quotes[0].Volume, 86631393)
	st.Expect(t, quotes[36].Date.Format("2006-01-02"), "2018-02-23")
	st.Expect(t, quotes[36].Open, 271.79)
	st.Expect(t, quotes[36].High, 274.71)
	st.Expect(t, quotes[36].Low, 271.25)
	st.Expect(t, quotes[36].Close, 274.71)
	st.Expect(t, quotes[36].Volume, 92753578)

	// Verify that we don't have pending mocks
	st.Expect(t, gock.IsDone(), true)
}

//
// Test - GetHistoricalQuotes
//
func TestGetHistoricalQuotes02(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New(apiBaseUrl).
		Get("/markets/history").
		Reply(200).
		BodyString(`{"history":{"day":[{"date":"2017-01-01","open":135.1,"high":139.37,"low":133.05,"close":138.47,"volume":79912670},{"date":"2017-02-01","open":137.66,"high":146.33,"low":136.33,"close":144.91,"volume":75930406},{"date":"2017-03-01","open":146.72,"high":150.15,"low":145.83,"close":146.95,"volume":89749218},{"date":"2017-04-01","open":146.94,"high":156.27,"low":145.76,"close":156.1,"volume":75717119},{"date":"2017-05-01","open":156.22,"high":160.86,"low":153.29,"close":153.88,"volume":86552189},{"date":"2017-06-01","open":153.52,"high":159.2242,"low":150.75,"close":153.4,"volume":100510570},{"date":"2017-07-01","open":154.39,"high":154.79,"low":144.25,"close":148.08,"volume":97247580},{"date":"2017-08-01","open":150.24,"high":156.05,"low":146.89,"close":150.0,"volume":108301722},{"date":"2017-09-01","open":150.26,"high":163.61,"low":149.76,"close":163.56,"volume":110304258},{"date":"2017-10-01","open":164.2,"high":167.94,"low":161.5111,"close":165.31,"volume":68423735},{"date":"2017-11-01","open":166.42,"high":180.67,"low":160.53,"close":179.82,"volume":103228255},{"date":"2017-12-01","open":180.32,"high":191.49,"low":176.7,"close":189.53,"volume":103713592},{"date":"2018-01-01","open":190.21,"high":207.605,"low":187.819,"close":201.81,"volume":87523559},{"date":"2018-02-01","open":199.34,"high":202.25,"low":175.42,"close":188.35,"volume":111317234}]}}`)

	// Create new tradier instance
	tradier := &Api{}

	// Send API call.
	start := time.Date(2017, 01, 01, 0, 0, 0, 0, time.UTC)
	end := time.Date(2018, 02, 23, 0, 0, 0, 0, time.UTC)
	quotes, err := tradier.GetHistoricalQuotes("HD", start, end, "monthly")

	// Verify the data was return as expected
	st.Expect(t, err, nil)
	st.Expect(t, len(quotes), 14)
	st.Expect(t, quotes[0].Date.Format("2006-01-02"), "2017-01-01")
	st.Expect(t, quotes[0].Open, 135.1)
	st.Expect(t, quotes[0].High, 139.37)
	st.Expect(t, quotes[0].Low, 133.05)
	st.Expect(t, quotes[0].Close, 138.47)
	st.Expect(t, quotes[0].Volume, 79912670)
	st.Expect(t, quotes[13].Date.Format("2006-01-02"), "2018-02-01")
	st.Expect(t, quotes[13].Open, 199.34)
	st.Expect(t, quotes[13].High, 202.25)
	st.Expect(t, quotes[13].Low, 175.42)
	st.Expect(t, quotes[13].Close, 188.35)
	st.Expect(t, quotes[13].Volume, 111317234)

	// Verify that we don't have pending mocks
	st.Expect(t, gock.IsDone(), true)
}

//
// Test - GetTimeSalesQuotes
//
func TestGetTimeSalesQuotes01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New(apiBaseUrl).
		Get("/markets/timesales").
		Reply(200).
		BodyString(`{"series":{"data":[{"time":"2018-02-26T09:30:00","timestamp":1519655400,"price":275.90999999999997,"open":275.93,"high":276.0,"low":275.82,"close":275.82,"volume":653535,"vwap":275.92082},{"time":"2018-02-26T09:31:00","timestamp":1519655460,"price":275.765,"open":275.83,"high":275.84,"low":275.69,"close":275.72,"volume":309193,"vwap":275.76352},{"time":"2018-02-26T09:32:00","timestamp":1519655520,"price":275.78,"open":275.69,"high":275.87,"low":275.69,"close":275.805,"volume":213209,"vwap":275.77812},{"time":"2018-02-26T09:33:00","timestamp":1519655580,"price":275.83500000000004,"open":275.81,"high":275.92,"low":275.75,"close":275.84,"volume":215920,"vwap":275.8332},{"time":"2018-02-26T09:34:00","timestamp":1519655640,"price":275.87,"open":275.84,"high":275.98,"low":275.76,"close":275.97,"volume":199149,"vwap":275.86368},{"time":"2018-02-26T09:35:00","timestamp":1519655700,"price":276.17,"open":275.98,"high":276.36,"low":275.98,"close":276.345,"volume":519176,"vwap":276.15419},{"time":"2018-02-26T09:36:00","timestamp":1519655760,"price":276.335,"open":276.35,"high":276.4,"low":276.27,"close":276.33,"volume":408794,"vwap":276.33087},{"time":"2018-02-26T09:37:00","timestamp":1519655820,"price":276.385,"open":276.34,"high":276.47,"low":276.3,"close":276.4362,"volume":242397,"vwap":276.38881},{"time":"2018-02-26T09:38:00","timestamp":1519655880,"price":276.40085,"open":276.43,"high":276.4817,"low":276.32,"close":276.45,"volume":354288,"vwap":276.41274},{"time":"2018-02-26T09:39:00","timestamp":1519655940,"price":276.54499999999996,"open":276.46,"high":276.64,"low":276.45,"close":276.63,"volume":278381,"vwap":276.51209},{"time":"2018-02-26T09:40:00","timestamp":1519656000,"price":276.59000000000003,"open":276.64,"high":276.69,"low":276.49,"close":276.5798,"volume":502734,"vwap":276.59456},{"time":"2018-02-26T09:41:00","timestamp":1519656060,"price":276.52,"open":276.56,"high":276.6,"low":276.44,"close":276.459,"volume":667886,"vwap":276.50509},{"time":"2018-02-26T09:42:00","timestamp":1519656120,"price":276.405,"open":276.47,"high":276.48,"low":276.33,"close":276.37,"volume":233157,"vwap":276.40912},{"time":"2018-02-26T09:43:00","timestamp":1519656180,"price":276.424,"open":276.39,"high":276.48,"low":276.368,"close":276.4,"volume":224170,"vwap":276.42135},{"time":"2018-02-26T09:44:00","timestamp":1519656240,"price":276.35,"open":276.41,"high":276.43,"low":276.27,"close":276.31,"volume":220324,"vwap":276.32843},{"time":"2018-02-26T09:45:00","timestamp":1519656300,"price":276.345,"open":276.3193,"high":276.42,"low":276.27,"close":276.3,"volume":161989,"vwap":276.35985},{"time":"2018-02-26T09:46:00","timestamp":1519656360,"price":276.24,"open":276.3,"high":276.31,"low":276.17,"close":276.17,"volume":196576,"vwap":276.22277},{"time":"2018-02-26T09:47:00","timestamp":1519656420,"price":276.175,"open":276.185,"high":276.23,"low":276.12,"close":276.17,"volume":239287,"vwap":276.1789},{"time":"2018-02-26T09:48:00","timestamp":1519656480,"price":276.25,"open":276.17,"high":276.34,"low":276.16,"close":276.32,"volume":138451,"vwap":276.25997},{"time":"2018-02-26T09:49:00","timestamp":1519656540,"price":276.385,"open":276.33,"high":276.44,"low":276.33,"close":276.39,"volume":162143,"vwap":276.40363},{"time":"2018-02-26T09:50:00","timestamp":1519656600,"price":276.41,"open":276.41,"high":276.47,"low":276.35,"close":276.44,"volume":130968,"vwap":276.4162},{"time":"2018-02-26T09:51:00","timestamp":1519656660,"price":276.405,"open":276.44,"high":276.44,"low":276.37,"close":276.38,"volume":52784,"vwap":276.40916},{"time":"2018-02-26T09:52:00","timestamp":1519656720,"price":276.36,"open":276.37,"high":276.42,"low":276.3,"close":276.33,"volume":124640,"vwap":276.35723},{"time":"2018-02-26T09:53:00","timestamp":1519656780,"price":276.31,"open":276.34,"high":276.39,"low":276.23,"close":276.37,"volume":177647,"vwap":276.29192},{"time":"2018-02-26T09:54:00","timestamp":1519656840,"price":276.37,"open":276.37,"high":276.48,"low":276.26,"close":276.2844,"volume":173112,"vwap":276.39216},{"time":"2018-02-26T09:55:00","timestamp":1519656900,"price":276.26,"open":276.28,"high":276.32,"low":276.2,"close":276.32,"volume":144704,"vwap":276.2516},{"time":"2018-02-26T09:56:00","timestamp":1519656960,"price":276.275,"open":276.33,"high":276.37,"low":276.18,"close":276.21,"volume":118463,"vwap":276.27079},{"time":"2018-02-26T09:57:00","timestamp":1519657020,"price":276.2,"open":276.2,"high":276.26,"low":276.14,"close":276.15,"volume":227083,"vwap":276.19326},{"time":"2018-02-26T09:58:00","timestamp":1519657080,"price":276.115,"open":276.145,"high":276.18,"low":276.05,"close":276.1,"volume":150056,"vwap":276.11864},{"time":"2018-02-26T09:59:00","timestamp":1519657140,"price":276.17335,"open":276.0967,"high":276.25,"low":276.0967,"close":276.22,"volume":156967,"vwap":276.18331},{"time":"2018-02-26T10:00:00","timestamp":1519657200,"price":276.175,"open":276.21,"high":276.29,"low":276.06,"close":276.24,"volume":191829,"vwap":276.15774},{"time":"2018-02-26T10:01:00","timestamp":1519657260,"price":276.1843,"open":276.24,"high":276.2486,"low":276.12,"close":276.24,"volume":120251,"vwap":276.19169},{"time":"2018-02-26T10:02:00","timestamp":1519657320,"price":276.16999999999996,"open":276.2499,"high":276.25,"low":276.09,"close":276.19,"volume":102796,"vwap":276.18638},{"time":"2018-02-26T10:03:00","timestamp":1519657380,"price":276.115,"open":276.18,"high":276.19,"low":276.04,"close":276.19,"volume":96257,"vwap":276.12403},{"time":"2018-02-26T10:04:00","timestamp":1519657440,"price":276.15,"open":276.18,"high":276.2,"low":276.1,"close":276.1,"volume":101706,"vwap":276.15868},{"time":"2018-02-26T10:05:00","timestamp":1519657500,"price":276.11,"open":276.1,"high":276.16,"low":276.06,"close":276.11,"volume":114131,"vwap":276.09308},{"time":"2018-02-26T10:06:00","timestamp":1519657560,"price":276.24995,"open":276.11,"high":276.39,"low":276.1099,"close":276.25,"volume":289521,"vwap":276.27041},{"time":"2018-02-26T10:07:00","timestamp":1519657620,"price":276.23,"open":276.25,"high":276.28,"low":276.18,"close":276.227,"volume":158168,"vwap":276.22603},{"time":"2018-02-26T10:08:00","timestamp":1519657680,"price":276.18,"open":276.22,"high":276.26,"low":276.1,"close":276.1448,"volume":89591,"vwap":276.18207},{"time":"2018-02-26T10:09:00","timestamp":1519657740,"price":276.205,"open":276.145,"high":276.27,"low":276.14,"close":276.27,"volume":112340,"vwap":276.18867},{"time":"2018-02-26T10:10:00","timestamp":1519657800,"price":276.2,"open":276.26,"high":276.26,"low":276.14,"close":276.16,"volume":105005,"vwap":276.1834},{"time":"2018-02-26T10:11:00","timestamp":1519657860,"price":276.15,"open":276.155,"high":276.24,"low":276.06,"close":276.15,"volume":83617,"vwap":276.16084},{"time":"2018-02-26T10:12:00","timestamp":1519657920,"price":276.13,"open":276.1599,"high":276.16,"low":276.1,"close":276.105,"volume":57219,"vwap":276.1277},{"time":"2018-02-26T10:13:00","timestamp":1519657980,"price":276.04,"open":276.11,"high":276.11,"low":275.97,"close":275.9732,"volume":229938,"vwap":276.0287},{"time":"2018-02-26T10:14:00","timestamp":1519658040,"price":275.9001,"open":275.98,"high":275.98,"low":275.8202,"close":275.84,"volume":192772,"vwap":275.89994},{"time":"2018-02-26T10:15:00","timestamp":1519658100,"price":275.8,"open":275.85,"high":275.87,"low":275.73,"close":275.78,"volume":150948,"vwap":275.79823},{"time":"2018-02-26T10:16:00","timestamp":1519658160,"price":275.73,"open":275.8,"high":275.81,"low":275.65,"close":275.74,"volume":263949,"vwap":275.72229},{"time":"2018-02-26T10:17:00","timestamp":1519658220,"price":275.7866,"open":275.74,"high":275.8832,"low":275.69,"close":275.8529,"volume":137284,"vwap":275.77994},{"time":"2018-02-26T10:18:00","timestamp":1519658280,"price":275.89,"open":275.85,"high":275.96,"low":275.82,"close":275.94,"volume":86431,"vwap":275.89483},{"time":"2018-02-26T10:19:00","timestamp":1519658340,"price":275.925,"open":275.94,"high":275.97,"low":275.88,"close":275.94,"volume":105778,"vwap":275.92196},{"time":"2018-02-26T10:20:00","timestamp":1519658400,"price":275.865,"open":275.94,"high":275.94,"low":275.79,"close":275.84,"volume":99338,"vwap":275.85316},{"time":"2018-02-26T10:21:00","timestamp":1519658460,"price":275.865,"open":275.8425,"high":275.93,"low":275.8,"close":275.82,"volume":64502,"vwap":275.86413},{"time":"2018-02-26T10:22:00","timestamp":1519658520,"price":275.845,"open":275.82,"high":275.89,"low":275.8,"close":275.8,"volume":140783,"vwap":275.84915},{"time":"2018-02-26T10:23:00","timestamp":1519658580,"price":275.85,"open":275.805,"high":275.92,"low":275.78,"close":275.87,"volume":78069,"vwap":275.8253},{"time":"2018-02-26T10:24:00","timestamp":1519658640,"price":275.855,"open":275.87,"high":275.91,"low":275.8,"close":275.89,"volume":63768,"vwap":275.84875},{"time":"2018-02-26T10:25:00","timestamp":1519658700,"price":275.925,"open":275.88,"high":275.99,"low":275.86,"close":275.86,"volume":153538,"vwap":275.93518},{"time":"2018-02-26T10:26:00","timestamp":1519658760,"price":275.77004999999997,"open":275.86,"high":275.86,"low":275.6801,"close":275.715,"volume":120629,"vwap":275.75848},{"time":"2018-02-26T10:27:00","timestamp":1519658820,"price":275.7,"open":275.715,"high":275.78,"low":275.62,"close":275.62,"volume":175760,"vwap":275.69182},{"time":"2018-02-26T10:28:00","timestamp":1519658880,"price":275.565,"open":275.63,"high":275.65,"low":275.48,"close":275.51,"volume":213735,"vwap":275.54283},{"time":"2018-02-26T10:29:00","timestamp":1519658940,"price":275.54305,"open":275.5052,"high":275.6161,"low":275.47,"close":275.61,"volume":99244,"vwap":275.53881},{"time":"2018-02-26T10:30:00","timestamp":1519659000,"price":275.58,"open":275.62,"high":275.64,"low":275.52,"close":275.53,"volume":128278,"vwap":275.59007},{"time":"2018-02-26T10:31:00","timestamp":1519659060,"price":275.53665,"open":275.53,"high":275.6033,"low":275.47,"close":275.55,"volume":151823,"vwap":275.5215},{"time":"2018-02-26T10:32:00","timestamp":1519659120,"price":275.59000000000003,"open":275.55,"high":275.67,"low":275.51,"close":275.51,"volume":145507,"vwap":275.61322},{"time":"2018-02-26T10:33:00","timestamp":1519659180,"price":275.45500000000004,"open":275.51,"high":275.56,"low":275.35,"close":275.45,"volume":208237,"vwap":275.43729},{"time":"2018-02-26T10:34:00","timestamp":1519659240,"price":275.42,"open":275.45,"high":275.47,"low":275.37,"close":275.41,"volume":154095,"vwap":275.40559},{"time":"2018-02-26T10:35:00","timestamp":1519659300,"price":275.46500000000003,"open":275.41,"high":275.52,"low":275.41,"close":275.44,"volume":167884,"vwap":275.47137},{"time":"2018-02-26T10:36:00","timestamp":1519659360,"price":275.355,"open":275.45,"high":275.45,"low":275.26,"close":275.39,"volume":109208,"vwap":275.35054},{"time":"2018-02-26T10:37:00","timestamp":1519659420,"price":275.48,"open":275.3799,"high":275.59,"low":275.37,"close":275.5,"volume":87027,"vwap":275.48514},{"time":"2018-02-26T10:38:00","timestamp":1519659480,"price":275.58000000000004,"open":275.51,"high":275.67,"low":275.49,"close":275.62,"volume":125644,"vwap":275.60673},{"time":"2018-02-26T10:39:00","timestamp":1519659540,"price":275.71000000000004,"open":275.62,"high":275.8,"low":275.62,"close":275.7788,"volume":101932,"vwap":275.70202},{"time":"2018-02-26T10:40:00","timestamp":1519659600,"price":275.755,"open":275.78,"high":275.83,"low":275.68,"close":275.75,"volume":134952,"vwap":275.75992},{"time":"2018-02-26T10:41:00","timestamp":1519659660,"price":275.81500000000005,"open":275.75,"high":275.91,"low":275.72,"close":275.9,"volume":142424,"vwap":275.82085},{"time":"2018-02-26T10:42:00","timestamp":1519659720,"price":275.885,"open":275.8999,"high":275.93,"low":275.84,"close":275.855,"volume":147148,"vwap":275.87864},{"time":"2018-02-26T10:43:00","timestamp":1519659780,"price":275.83500000000004,"open":275.85,"high":275.87,"low":275.8,"close":275.87,"volume":44542,"vwap":275.84045},{"time":"2018-02-26T10:44:00","timestamp":1519659840,"price":275.835,"open":275.86,"high":275.89,"low":275.78,"close":275.86,"volume":81484,"vwap":275.82525},{"time":"2018-02-26T10:45:00","timestamp":1519659900,"price":275.895,"open":275.87,"high":275.96,"low":275.83,"close":275.87,"volume":89067,"vwap":275.89426},{"time":"2018-02-26T10:46:00","timestamp":1519659960,"price":275.815,"open":275.862,"high":275.89,"low":275.74,"close":275.76,"volume":64993,"vwap":275.80978},{"time":"2018-02-26T10:47:00","timestamp":1519660020,"price":275.7075,"open":275.755,"high":275.755,"low":275.66,"close":275.71,"volume":91970,"vwap":275.7122},{"time":"2018-02-26T10:48:00","timestamp":1519660080,"price":275.765,"open":275.71,"high":275.83,"low":275.7,"close":275.8,"volume":102724,"vwap":275.76757},{"time":"2018-02-26T10:49:00","timestamp":1519660140,"price":275.78999999999996,"open":275.8,"high":275.83,"low":275.75,"close":275.82,"volume":69568,"vwap":275.77868},{"time":"2018-02-26T10:50:00","timestamp":1519660200,"price":275.78499999999997,"open":275.82,"high":275.83,"low":275.74,"close":275.75,"volume":89238,"vwap":275.78931},{"time":"2018-02-26T10:51:00","timestamp":1519660260,"price":275.69,"open":275.74,"high":275.76,"low":275.62,"close":275.64,"volume":82465,"vwap":275.69609},{"time":"2018-02-26T10:52:00","timestamp":1519660320,"price":275.63424999999995,"open":275.64,"high":275.6885,"low":275.58,"close":275.58,"volume":81421,"vwap":275.63579},{"time":"2018-02-26T10:53:00","timestamp":1519660380,"price":275.625,"open":275.59,"high":275.72,"low":275.53,"close":275.67,"volume":268613,"vwap":275.68121},{"time":"2018-02-26T10:54:00","timestamp":1519660440,"price":275.7025,"open":275.67,"high":275.75,"low":275.655,"close":275.66,"volume":79344,"vwap":275.68483},{"time":"2018-02-26T10:55:00","timestamp":1519660500,"price":275.61,"open":275.66,"high":275.7,"low":275.52,"close":275.52,"volume":43965,"vwap":275.635},{"time":"2018-02-26T10:56:00","timestamp":1519660560,"price":275.555,"open":275.52,"high":275.61,"low":275.5,"close":275.57,"volume":47066,"vwap":275.57128},{"time":"2018-02-26T10:57:00","timestamp":1519660620,"price":275.57925,"open":275.56,"high":275.63,"low":275.5285,"close":275.6099,"volume":73496,"vwap":275.56908},{"time":"2018-02-26T10:58:00","timestamp":1519660680,"price":275.5831,"open":275.6,"high":275.6262,"low":275.54,"close":275.54,"volume":70136,"vwap":275.5879},{"time":"2018-02-26T10:59:00","timestamp":1519660740,"price":275.565,"open":275.52,"high":275.63,"low":275.5,"close":275.62,"volume":68968,"vwap":275.55152},{"time":"2018-02-26T11:00:00","timestamp":1519660800,"price":275.54499999999996,"open":275.63,"high":275.65,"low":275.44,"close":275.47,"volume":143898,"vwap":275.53163},{"time":"2018-02-26T11:01:00","timestamp":1519660860,"price":275.61465,"open":275.47,"high":275.7593,"low":275.47,"close":275.75,"volume":144288,"vwap":275.625},{"time":"2018-02-26T11:02:00","timestamp":1519660920,"price":275.79499999999996,"open":275.75,"high":275.84,"low":275.75,"close":275.8248,"volume":102403,"vwap":275.80246},{"time":"2018-02-26T11:03:00","timestamp":1519660980,"price":275.935,"open":275.8247,"high":276.08,"low":275.79,"close":276.05,"volume":246489,"vwap":275.95378},{"time":"2018-02-26T11:04:00","timestamp":1519661040,"price":276.07,"open":276.04,"high":276.15,"low":275.99,"close":276.15,"volume":217130,"vwap":276.07262},{"time":"2018-02-26T11:05:00","timestamp":1519661100,"price":276.095,"open":276.155,"high":276.155,"low":276.035,"close":276.0801,"volume":115041,"vwap":276.07244},{"time":"2018-02-26T11:06:00","timestamp":1519661160,"price":276.1,"open":276.095,"high":276.18,"low":276.02,"close":276.16,"volume":88009,"vwap":276.10397},{"time":"2018-02-26T11:07:00","timestamp":1519661220,"price":276.19,"open":276.16,"high":276.24,"low":276.14,"close":276.201,"volume":82286,"vwap":276.1979},{"time":"2018-02-26T11:08:00","timestamp":1519661280,"price":276.175,"open":276.2027,"high":276.23,"low":276.12,"close":276.165,"volume":63983,"vwap":276.16693},{"time":"2018-02-26T11:09:00","timestamp":1519661340,"price":276.225,"open":276.16,"high":276.29,"low":276.16,"close":276.2155,"volume":153177,"vwap":276.2491},{"time":"2018-02-26T11:10:00","timestamp":1519661400,"price":276.235,"open":276.23,"high":276.27,"low":276.2,"close":276.23,"volume":45695,"vwap":276.23483},{"time":"2018-02-26T11:11:00","timestamp":1519661460,"price":276.23,"open":276.25,"high":276.26,"low":276.2,"close":276.21,"volume":41050,"vwap":276.22385},{"time":"2018-02-26T11:12:00","timestamp":1519661520,"price":276.2025,"open":276.215,"high":276.26,"low":276.145,"close":276.25,"volume":84912,"vwap":276.19771},{"time":"2018-02-26T11:13:00","timestamp":1519661580,"price":276.22,"open":276.24,"high":276.25,"low":276.19,"close":276.2,"volume":40030,"vwap":276.21618},{"time":"2018-02-26T11:14:00","timestamp":1519661640,"price":276.25,"open":276.21,"high":276.3,"low":276.2,"close":276.24,"volume":135462,"vwap":276.24144},{"time":"2018-02-26T11:15:00","timestamp":1519661700,"price":276.245,"open":276.24,"high":276.28,"low":276.21,"close":276.22,"volume":44346,"vwap":276.23817},{"time":"2018-02-26T11:16:00","timestamp":1519661760,"price":276.17,"open":276.225,"high":276.24,"low":276.1,"close":276.1416,"volume":90744,"vwap":276.14923},{"time":"2018-02-26T11:17:00","timestamp":1519661820,"price":276.21000000000004,"open":276.13,"high":276.29,"low":276.13,"close":276.28,"volume":65705,"vwap":276.2566},{"time":"2018-02-26T11:18:00","timestamp":1519661880,"price":276.28,"open":276.2754,"high":276.32,"low":276.24,"close":276.2793,"volume":81347,"vwap":276.29855},{"time":"2018-02-26T11:19:00","timestamp":1519661940,"price":276.34000000000003,"open":276.27,"high":276.46,"low":276.22,"close":276.45,"volume":202809,"vwap":276.36247},{"time":"2018-02-26T11:20:00","timestamp":1519662000,"price":276.4,"open":276.46,"high":276.46,"low":276.34,"close":276.44,"volume":161317,"vwap":276.4057},{"time":"2018-02-26T11:21:00","timestamp":1519662060,"price":276.4301,"open":276.445,"high":276.4702,"low":276.39,"close":276.41,"volume":85365,"vwap":276.43988},{"time":"2018-02-26T11:22:00","timestamp":1519662120,"price":276.395,"open":276.41,"high":276.42,"low":276.37,"close":276.38,"volume":30248,"vwap":276.39868},{"time":"2018-02-26T11:23:00","timestamp":1519662180,"price":276.33,"open":276.38,"high":276.38,"low":276.28,"close":276.31,"volume":88021,"vwap":276.31784},{"time":"2018-02-26T11:24:00","timestamp":1519662240,"price":276.315,"open":276.32,"high":276.35,"low":276.28,"close":276.28,"volume":41633,"vwap":276.30998},{"time":"2018-02-26T11:25:00","timestamp":1519662300,"price":276.315,"open":276.285,"high":276.36,"low":276.27,"close":276.28,"volume":77045,"vwap":276.30918},{"time":"2018-02-26T11:26:00","timestamp":1519662360,"price":276.32,"open":276.28,"high":276.4,"low":276.24,"close":276.38,"volume":95361,"vwap":276.3268},{"time":"2018-02-26T11:27:00","timestamp":1519662420,"price":276.4,"open":276.3889,"high":276.43,"low":276.37,"close":276.39,"volume":48068,"vwap":276.39744},{"time":"2018-02-26T11:28:00","timestamp":1519662480,"price":276.40305,"open":276.4,"high":276.4461,"low":276.36,"close":276.36,"volume":41112,"vwap":276.40568},{"time":"2018-02-26T11:29:00","timestamp":1519662540,"price":276.435,"open":276.37,"high":276.5,"low":276.37,"close":276.45,"volume":119435,"vwap":276.44926},{"time":"2018-02-26T11:30:00","timestamp":1519662600,"price":276.42,"open":276.45,"high":276.47,"low":276.37,"close":276.39,"volume":36782,"vwap":276.42435},{"time":"2018-02-26T11:31:00","timestamp":1519662660,"price":276.45,"open":276.4,"high":276.5,"low":276.4,"close":276.495,"volume":45709,"vwap":276.46817},{"time":"2018-02-26T11:32:00","timestamp":1519662720,"price":276.49,"open":276.495,"high":276.54,"low":276.44,"close":276.47,"volume":131091,"vwap":276.48905},{"time":"2018-02-26T11:33:00","timestamp":1519662780,"price":276.47,"open":276.47,"high":276.55,"low":276.39,"close":276.41,"volume":95684,"vwap":276.46578},{"time":"2018-02-26T11:34:00","timestamp":1519662840,"price":276.345,"open":276.415,"high":276.42,"low":276.27,"close":276.28,"volume":121964,"vwap":276.3714},{"time":"2018-02-26T11:35:00","timestamp":1519662900,"price":276.33,"open":276.28,"high":276.39,"low":276.27,"close":276.27,"volume":55141,"vwap":276.31115},{"time":"2018-02-26T11:36:00","timestamp":1519662960,"price":276.21500000000003,"open":276.27,"high":276.29,"low":276.14,"close":276.14,"volume":120189,"vwap":276.21917},{"time":"2018-02-26T11:37:00","timestamp":1519663020,"price":276.2099,"open":276.14,"high":276.2798,"low":276.14,"close":276.2,"volume":54503,"vwap":276.22375},{"time":"2018-02-26T11:38:00","timestamp":1519663080,"price":276.20000000000005,"open":276.19,"high":276.24,"low":276.16,"close":276.22,"volume":52903,"vwap":276.19543},{"time":"2018-02-26T11:39:00","timestamp":1519663140,"price":276.265,"open":276.2199,"high":276.32,"low":276.21,"close":276.24,"volume":48581,"vwap":276.27715},{"time":"2018-02-26T11:40:00","timestamp":1519663200,"price":276.21500000000003,"open":276.24,"high":276.26,"low":276.17,"close":276.25,"volume":41037,"vwap":276.22418},{"time":"2018-02-26T11:41:00","timestamp":1519663260,"price":276.245,"open":276.26,"high":276.27,"low":276.22,"close":276.25,"volume":52700,"vwap":276.24383},{"time":"2018-02-26T11:42:00","timestamp":1519663320,"price":276.2875,"open":276.25,"high":276.33,"low":276.245,"close":276.3,"volume":25422,"vwap":276.28852},{"time":"2018-02-26T11:43:00","timestamp":1519663380,"price":276.3225,"open":276.3,"high":276.37,"low":276.275,"close":276.35,"volume":71790,"vwap":276.32977},{"time":"2018-02-26T11:44:00","timestamp":1519663440,"price":276.3425,"open":276.35,"high":276.37,"low":276.315,"close":276.33,"volume":57893,"vwap":276.34997},{"time":"2018-02-26T11:45:00","timestamp":1519663500,"price":276.355,"open":276.34,"high":276.38,"low":276.33,"close":276.35,"volume":74039,"vwap":276.36677},{"time":"2018-02-26T11:46:00","timestamp":1519663560,"price":276.33000000000004,"open":276.34,"high":276.35,"low":276.31,"close":276.33,"volume":30545,"vwap":276.3289},{"time":"2018-02-26T11:47:00","timestamp":1519663620,"price":276.35,"open":276.34,"high":276.39,"low":276.31,"close":276.385,"volume":23990,"vwap":276.35451},{"time":"2018-02-26T11:48:00","timestamp":1519663680,"price":276.345,"open":276.39,"high":276.4,"low":276.29,"close":276.3071,"volume":43276,"vwap":276.33494},{"time":"2018-02-26T11:49:00","timestamp":1519663740,"price":276.28,"open":276.3,"high":276.3,"low":276.26,"close":276.2799,"volume":34148,"vwap":276.27757},{"time":"2018-02-26T11:50:00","timestamp":1519663800,"price":276.30965000000003,"open":276.26,"high":276.3693,"low":276.25,"close":276.34,"volume":41494,"vwap":276.31245},{"time":"2018-02-26T11:51:00","timestamp":1519663860,"price":276.3,"open":276.34,"high":276.345,"low":276.255,"close":276.26,"volume":32596,"vwap":276.30197},{"time":"2018-02-26T11:52:00","timestamp":1519663920,"price":276.24,"open":276.27,"high":276.28,"low":276.2,"close":276.2,"volume":41440,"vwap":276.23627},{"time":"2018-02-26T11:53:00","timestamp":1519663980,"price":276.26495,"open":276.21,"high":276.3199,"low":276.21,"close":276.29,"volume":25332,"vwap":276.27494},{"time":"2018-02-26T11:54:00","timestamp":1519664040,"price":276.25284999999997,"open":276.29,"high":276.3007,"low":276.205,"close":276.21,"volume":52723,"vwap":276.26971},{"time":"2018-02-26T11:55:00","timestamp":1519664100,"price":276.24,"open":276.2001,"high":276.31,"low":276.17,"close":276.31,"volume":62829,"vwap":276.19295},{"time":"2018-02-26T11:56:00","timestamp":1519664160,"price":276.29999999999995,"open":276.31,"high":276.34,"low":276.26,"close":276.34,"volume":63263,"vwap":276.30135},{"time":"2018-02-26T11:57:00","timestamp":1519664220,"price":276.34965,"open":276.33,"high":276.3693,"low":276.33,"close":276.33,"volume":34279,"vwap":276.3382},{"time":"2018-02-26T11:58:00","timestamp":1519664280,"price":276.34,"open":276.338,"high":276.4,"low":276.28,"close":276.28,"volume":48157,"vwap":276.35494},{"time":"2018-02-26T11:59:00","timestamp":1519664340,"price":276.2869,"open":276.29,"high":276.3338,"low":276.24,"close":276.28,"volume":78508,"vwap":276.2821},{"time":"2018-02-26T12:00:00","timestamp":1519664400,"price":276.30999999999995,"open":276.29,"high":276.34,"low":276.28,"close":276.3,"volume":109794,"vwap":276.30932},{"time":"2018-02-26T12:01:00","timestamp":1519664460,"price":276.33500000000004,"open":276.3,"high":276.37,"low":276.3,"close":276.35,"volume":19649,"vwap":276.33699},{"time":"2018-02-26T12:02:00","timestamp":1519664520,"price":276.3619,"open":276.36,"high":276.3838,"low":276.34,"close":276.37,"volume":57119,"vwap":276.36534},{"time":"2018-02-26T12:03:00","timestamp":1519664580,"price":276.405,"open":276.39,"high":276.46,"low":276.35,"close":276.42,"volume":117789,"vwap":276.42833},{"time":"2018-02-26T12:04:00","timestamp":1519664640,"price":276.40999999999997,"open":276.43,"high":276.43,"low":276.39,"close":276.41,"volume":37942,"vwap":276.41481},{"time":"2018-02-26T12:05:00","timestamp":1519664700,"price":276.485,"open":276.41,"high":276.56,"low":276.41,"close":276.53,"volume":147744,"vwap":276.4912},{"time":"2018-02-26T12:06:00","timestamp":1519664760,"price":276.525,"open":276.5157,"high":276.57,"low":276.48,"close":276.5632,"volume":143120,"vwap":276.5341},{"time":"2018-02-26T12:07:00","timestamp":1519664820,"price":276.595,"open":276.57,"high":276.67,"low":276.52,"close":276.63,"volume":202864,"vwap":276.61151},{"time":"2018-02-26T12:08:00","timestamp":1519664880,"price":276.61,"open":276.64,"high":276.64,"low":276.58,"close":276.58,"volume":80595,"vwap":276.60711},{"time":"2018-02-26T12:09:00","timestamp":1519664940,"price":276.605,"open":276.58,"high":276.64,"low":276.57,"close":276.6322,"volume":118004,"vwap":276.62139},{"time":"2018-02-26T12:10:00","timestamp":1519665000,"price":276.705,"open":276.63,"high":276.78,"low":276.63,"close":276.74,"volume":254346,"vwap":276.71918},{"time":"2018-02-26T12:11:00","timestamp":1519665060,"price":276.745,"open":276.74,"high":276.79,"low":276.7,"close":276.7699,"volume":93867,"vwap":276.74131},{"time":"2018-02-26T12:12:00","timestamp":1519665120,"price":276.79499999999996,"open":276.76,"high":276.84,"low":276.75,"close":276.76,"volume":238144,"vwap":276.80115},{"time":"2018-02-26T12:13:00","timestamp":1519665180,"price":276.71500000000003,"open":276.76,"high":276.76,"low":276.67,"close":276.7,"volume":91598,"vwap":276.71847},{"time":"2018-02-26T12:14:00","timestamp":1519665240,"price":276.6715,"open":276.69,"high":276.7,"low":276.643,"close":276.69,"volume":64641,"vwap":276.67661},{"time":"2018-02-26T12:15:00","timestamp":1519665300,"price":276.70875,"open":276.69,"high":276.75,"low":276.6675,"close":276.72,"volume":81744,"vwap":276.71801},{"time":"2018-02-26T12:16:00","timestamp":1519665360,"price":276.70000000000005,"open":276.7173,"high":276.74,"low":276.66,"close":276.68,"volume":49381,"vwap":276.71621},{"time":"2018-02-26T12:17:00","timestamp":1519665420,"price":276.675,"open":276.68,"high":276.74,"low":276.61,"close":276.73,"volume":61614,"vwap":276.66498},{"time":"2018-02-26T12:18:00","timestamp":1519665480,"price":276.70500000000004,"open":276.73,"high":276.73,"low":276.68,"close":276.6948,"volume":54464,"vwap":276.70054},{"time":"2018-02-26T12:19:00","timestamp":1519665540,"price":276.72749999999996,"open":276.69,"high":276.765,"low":276.69,"close":276.76,"volume":88904,"vwap":276.74163},{"time":"2018-02-26T12:20:00","timestamp":1519665600,"price":276.78,"open":276.76,"high":276.8,"low":276.76,"close":276.79,"volume":99479,"vwap":276.78502},{"time":"2018-02-26T12:21:00","timestamp":1519665660,"price":276.76,"open":276.79,"high":276.81,"low":276.71,"close":276.71,"volume":81721,"vwap":276.76918},{"time":"2018-02-26T12:22:00","timestamp":1519665720,"price":276.76,"open":276.72,"high":276.8,"low":276.72,"close":276.79,"volume":62135,"vwap":276.77573},{"time":"2018-02-26T12:23:00","timestamp":1519665780,"price":276.815,"open":276.79,"high":276.84,"low":276.79,"close":276.8,"volume":94359,"vwap":276.81097},{"time":"2018-02-26T12:24:00","timestamp":1519665840,"price":276.78,"open":276.8,"high":276.81,"low":276.75,"close":276.78,"volume":34680,"vwap":276.78265},{"time":"2018-02-26T12:25:00","timestamp":1519665900,"price":276.8195,"open":276.78,"high":276.86,"low":276.779,"close":276.85,"volume":53615,"vwap":276.80698},{"time":"2018-02-26T12:26:00","timestamp":1519665960,"price":276.845,"open":276.86,"high":276.89,"low":276.8,"close":276.805,"volume":54634,"vwap":276.85264},{"time":"2018-02-26T12:27:00","timestamp":1519666020,"price":276.815,"open":276.815,"high":276.84,"low":276.79,"close":276.8,"volume":40051,"vwap":276.82251},{"time":"2018-02-26T12:28:00","timestamp":1519666080,"price":276.83000000000004,"open":276.8,"high":276.87,"low":276.79,"close":276.85,"volume":32213,"vwap":276.83311},{"time":"2018-02-26T12:29:00","timestamp":1519666140,"price":276.855,"open":276.84,"high":276.89,"low":276.82,"close":276.8701,"volume":96792,"vwap":276.85519},{"time":"2018-02-26T12:30:00","timestamp":1519666200,"price":276.89995,"open":276.88,"high":276.93,"low":276.8699,"close":276.89,"volume":84156,"vwap":276.90179},{"time":"2018-02-26T12:31:00","timestamp":1519666260,"price":276.79999999999995,"open":276.9,"high":276.9,"low":276.7,"close":276.7102,"volume":93144,"vwap":276.80437},{"time":"2018-02-26T12:32:00","timestamp":1519666320,"price":276.71500000000003,"open":276.72,"high":276.74,"low":276.69,"close":276.73,"volume":62270,"vwap":276.71053},{"time":"2018-02-26T12:33:00","timestamp":1519666380,"price":276.72945,"open":276.72,"high":276.7489,"low":276.71,"close":276.74,"volume":32018,"vwap":276.72695},{"time":"2018-02-26T12:34:00","timestamp":1519666440,"price":276.705,"open":276.74,"high":276.76,"low":276.65,"close":276.66,"volume":70383,"vwap":276.71141},{"time":"2018-02-26T12:35:00","timestamp":1519666500,"price":276.625,"open":276.659,"high":276.68,"low":276.57,"close":276.57,"volume":138196,"vwap":276.61969},{"time":"2018-02-26T12:36:00","timestamp":1519666560,"price":276.595,"open":276.57,"high":276.63,"low":276.56,"close":276.625,"volume":46542,"vwap":276.58624},{"time":"2018-02-26T12:37:00","timestamp":1519666620,"price":276.625,"open":276.62,"high":276.65,"low":276.6,"close":276.6499,"volume":59205,"vwap":276.62588},{"time":"2018-02-26T12:38:00","timestamp":1519666680,"price":276.685,"open":276.64,"high":276.73,"low":276.64,"close":276.7,"volume":95383,"vwap":276.68183},{"time":"2018-02-26T12:39:00","timestamp":1519666740,"price":276.69500000000005,"open":276.71,"high":276.73,"low":276.66,"close":276.67,"volume":22864,"vwap":276.71099},{"time":"2018-02-26T12:40:00","timestamp":1519666800,"price":276.62,"open":276.67,"high":276.67,"low":276.57,"close":276.63,"volume":41212,"vwap":276.606},{"time":"2018-02-26T12:41:00","timestamp":1519666860,"price":276.58,"open":276.63,"high":276.63,"low":276.53,"close":276.59,"volume":77380,"vwap":276.56464},{"time":"2018-02-26T12:42:00","timestamp":1519666920,"price":276.55999999999995,"open":276.59,"high":276.59,"low":276.53,"close":276.58,"volume":62330,"vwap":276.55763},{"time":"2018-02-26T12:43:00","timestamp":1519666980,"price":276.625,"open":276.57,"high":276.68,"low":276.57,"close":276.68,"volume":111123,"vwap":276.6409},{"time":"2018-02-26T12:44:00","timestamp":1519667040,"price":276.7125,"open":276.68,"high":276.745,"low":276.68,"close":276.745,"volume":47422,"vwap":276.70825},{"time":"2018-02-26T12:45:00","timestamp":1519667100,"price":276.70000000000005,"open":276.74,"high":276.74,"low":276.66,"close":276.73,"volume":52310,"vwap":276.69872},{"time":"2018-02-26T12:46:00","timestamp":1519667160,"price":276.755,"open":276.74,"high":276.78,"low":276.73,"close":276.775,"volume":51315,"vwap":276.76003},{"time":"2018-02-26T12:47:00","timestamp":1519667220,"price":276.77,"open":276.77,"high":276.8,"low":276.74,"close":276.79,"volume":27889,"vwap":276.7714},{"time":"2018-02-26T12:48:00","timestamp":1519667280,"price":276.78499999999997,"open":276.78,"high":276.8,"low":276.77,"close":276.79,"volume":33572,"vwap":276.78428},{"time":"2018-02-26T12:49:00","timestamp":1519667340,"price":276.91505,"open":276.7801,"high":277.05,"low":276.7801,"close":277.02,"volume":228629,"vwap":276.92332},{"time":"2018-02-26T12:50:00","timestamp":1519667400,"price":277.08,"open":277.03,"high":277.14,"low":277.02,"close":277.11,"volume":192069,"vwap":277.09812},{"time":"2018-02-26T12:51:00","timestamp":1519667460,"price":277.065,"open":277.1056,"high":277.11,"low":277.02,"close":277.0367,"volume":56651,"vwap":277.06413},{"time":"2018-02-26T12:52:00","timestamp":1519667520,"price":277.04999999999995,"open":277.03,"high":277.08,"low":277.02,"close":277.0515,"volume":65827,"vwap":277.04769},{"time":"2018-02-26T12:53:00","timestamp":1519667580,"price":277.0675,"open":277.051,"high":277.105,"low":277.03,"close":277.09,"volume":47743,"vwap":277.06831},{"time":"2018-02-26T12:54:00","timestamp":1519667640,"price":277.07,"open":277.08,"high":277.09,"low":277.05,"close":277.09,"volume":35411,"vwap":277.07064},{"time":"2018-02-26T12:55:00","timestamp":1519667700,"price":277.12,"open":277.07,"high":277.17,"low":277.07,"close":277.13,"volume":118638,"vwap":277.11986},{"time":"2018-02-26T12:56:00","timestamp":1519667760,"price":277.125,"open":277.13,"high":277.13,"low":277.12,"close":277.12,"volume":1700,"vwap":277.12365}]}}`)

	// Create new tradier instance
	tradier := &Api{}

	// Send API call.
	start := time.Date(2018, 02, 26, 9, 30, 0, 0, time.UTC)
	end := time.Date(2018, 02, 26, 15, 04, 0, 0, time.UTC)
	quotes, err := tradier.GetTimeSalesQuotes("HD", start, end, "1min")

	// Verify the data was return as expected
	st.Expect(t, err, nil)
	st.Expect(t, len(quotes), 207)
	st.Expect(t, quotes[0].Time.Format("2006-01-02T15:04:05-0700 MST"), "2018-02-26T14:30:00+0000 UTC")
	st.Expect(t, quotes[0].Open, 275.93)
	st.Expect(t, quotes[0].High, 276.00)
	st.Expect(t, quotes[0].Low, 275.82)
	st.Expect(t, quotes[0].Close, 275.82)
	st.Expect(t, quotes[0].Volume, 653535)
	st.Expect(t, quotes[13].Time.Format("2006-01-02T15:04:05-0700 MST"), "2018-02-26T14:43:00+0000 UTC")
	st.Expect(t, quotes[13].Open, 276.39)
	st.Expect(t, quotes[13].High, 276.48)
	st.Expect(t, quotes[13].Low, 276.368)
	st.Expect(t, quotes[13].Close, 276.4)
	st.Expect(t, quotes[13].Volume, 224170)

	// Verify that we don't have pending mocks
	st.Expect(t, gock.IsDone(), true)
}

/* End File */
