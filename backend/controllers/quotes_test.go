//
// Date: 2/23/2017
// Author(s): Spicer Matthews (spicer@options.cafe)
// Copyright: 2017 Cloudmanic Labs, LLC. All rights reserved.
//

package controllers

import (
	"encoding/json"
	"fmt"
	"net/http"
	"net/http/httptest"
	"testing"

	"github.com/cloudmanic/app.options.cafe/backend/brokers/types"
	"github.com/cloudmanic/app.options.cafe/backend/models"
	"github.com/gin-gonic/gin"
	"github.com/nbio/st"
	gock "gopkg.in/h2non/gock.v1"
)

//
// Test - GetRank - 01
//
func TestGetRank01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New("https://api.tradier.com/v1").
		Get("/markets/history").
		Reply(200).
		BodyString(`{"history":{"day":[{"date":"2017-07-17","open":9.77,"high":10.03,"low":9.71,"close":9.82,"volume":0},{"date":"2017-07-18","open":9.86,"high":10.35,"low":9.66,"close":9.89,"volume":0},{"date":"2017-07-19","open":9.69,"high":9.94,"low":9.58,"close":9.79,"volume":0},{"date":"2017-07-20","open":9.66,"high":10.28,"low":9.5,"close":9.58,"volume":0},{"date":"2017-07-21","open":9.52,"high":9.98,"low":9.3,"close":9.36,"volume":0},{"date":"2017-07-24","open":9.94,"high":9.97,"low":9.26,"close":9.43,"volume":0},{"date":"2017-07-25","open":9.4,"high":9.52,"low":9.04,"close":9.43,"volume":0},{"date":"2017-07-26","open":9.25,"high":9.66,"low":8.84,"close":9.6,"volume":0},{"date":"2017-07-27","open":9.33,"high":11.5,"low":9.16,"close":10.11,"volume":0},{"date":"2017-07-28","open":10.62,"high":11.3,"low":10.26,"close":10.29,"volume":0},{"date":"2017-07-31","open":10.53,"high":10.84,"low":10.23,"close":10.26,"volume":0},{"date":"2017-08-01","open":10.19,"high":10.56,"low":9.95,"close":10.09,"volume":0},{"date":"2017-08-02","open":10.08,"high":10.81,"low":9.8,"close":10.28,"volume":0},{"date":"2017-08-03","open":10.47,"high":10.6,"low":9.9,"close":10.44,"volume":0},{"date":"2017-08-04","open":10.48,"high":10.5,"low":9.68,"close":10.03,"volume":0},{"date":"2017-08-07","open":10.19,"high":10.32,"low":9.76,"close":9.93,"volume":0},{"date":"2017-08-08","open":10.04,"high":11.52,"low":9.52,"close":10.96,"volume":0},{"date":"2017-08-09","open":11.49,"high":12.63,"low":11.11,"close":11.11,"volume":0},{"date":"2017-08-10","open":11.57,"high":16.17,"low":11.56,"close":16.04,"volume":0},{"date":"2017-08-11","open":16.17,"high":17.28,"low":14.5,"close":15.51,"volume":0},{"date":"2017-08-14","open":14.05,"high":14.05,"low":12.06,"close":12.33,"volume":0},{"date":"2017-08-15","open":11.78,"high":12.37,"low":11.45,"close":12.04,"volume":0},{"date":"2017-08-16","open":11.59,"high":12.54,"low":11.25,"close":11.74,"volume":0},{"date":"2017-08-17","open":11.81,"high":15.77,"low":11.54,"close":15.55,"volume":0},{"date":"2017-08-18","open":15.38,"high":16.04,"low":13.32,"close":14.26,"volume":0},{"date":"2017-08-21","open":14.59,"high":14.74,"low":13.07,"close":13.19,"volume":0},{"date":"2017-08-22","open":12.6,"high":12.94,"low":11.35,"close":11.35,"volume":0},{"date":"2017-08-23","open":11.51,"high":12.59,"low":11.39,"close":12.25,"volume":0},{"date":"2017-08-24","open":12.06,"high":12.83,"low":11.55,"close":12.23,"volume":0},{"date":"2017-08-25","open":12.2,"high":12.45,"low":11.1,"close":11.28,"volume":0},{"date":"2017-08-28","open":12.09,"high":12.11,"low":11.23,"close":11.32,"volume":0},{"date":"2017-08-29","open":13.33,"high":14.34,"low":11.48,"close":11.7,"volume":0},{"date":"2017-08-30","open":11.4,"high":11.98,"low":10.96,"close":11.22,"volume":0},{"date":"2017-08-31","open":11.07,"high":11.22,"low":10.34,"close":10.59,"volume":0},{"date":"2017-09-01","open":10.33,"high":10.46,"low":10.02,"close":10.13,"volume":0},{"date":"2017-09-05","open":11.75,"high":14.06,"low":11.41,"close":12.23,"volume":0},{"date":"2017-09-06","open":12.27,"high":12.59,"low":11.35,"close":11.63,"volume":0},{"date":"2017-09-07","open":11.93,"high":12.07,"low":11.32,"close":11.55,"volume":0},{"date":"2017-09-08","open":11.87,"high":12.6,"low":11.84,"close":12.12,"volume":0},{"date":"2017-09-11","open":11.38,"high":11.39,"low":10.51,"close":10.73,"volume":0},{"date":"2017-09-12","open":10.66,"high":10.95,"low":10.29,"close":10.58,"volume":0},{"date":"2017-09-13","open":10.72,"high":10.86,"low":10.33,"close":10.5,"volume":0},{"date":"2017-09-14","open":10.57,"high":11.04,"low":10.28,"close":10.44,"volume":0},{"date":"2017-09-15","open":10.51,"high":10.74,"low":10.0,"close":10.17,"volume":0},{"date":"2017-09-18","open":10.18,"high":10.42,"low":9.88,"close":10.15,"volume":0},{"date":"2017-09-19","open":10.16,"high":10.3,"low":9.85,"close":10.18,"volume":0},{"date":"2017-09-20","open":10.04,"high":10.67,"low":9.67,"close":9.78,"volume":0},{"date":"2017-09-21","open":9.74,"high":10.21,"low":9.54,"close":9.67,"volume":0},{"date":"2017-09-22","open":9.9,"high":10.2,"low":9.5,"close":9.59,"volume":0},{"date":"2017-09-25","open":10.08,"high":11.21,"low":9.79,"close":10.21,"volume":0},{"date":"2017-09-26","open":10.42,"high":10.68,"low":9.94,"close":10.17,"volume":0},{"date":"2017-09-27","open":9.9,"high":10.42,"low":9.63,"close":9.87,"volume":0},{"date":"2017-09-28","open":9.74,"high":10.13,"low":9.55,"close":9.55,"volume":0},{"date":"2017-09-29","open":9.59,"high":9.83,"low":9.36,"close":9.51,"volume":0},{"date":"2017-10-02","open":9.59,"high":10.04,"low":9.37,"close":9.45,"volume":0},{"date":"2017-10-03","open":9.3,"high":9.75,"low":9.3,"close":9.51,"volume":0},{"date":"2017-10-04","open":9.53,"high":9.88,"low":9.53,"close":9.63,"volume":0},{"date":"2017-10-05","open":9.48,"high":9.62,"low":9.13,"close":9.19,"volume":0},{"date":"2017-10-06","open":9.23,"high":10.27,"low":9.11,"close":9.65,"volume":0},{"date":"2017-10-09","open":9.92,"high":10.53,"low":9.88,"close":10.33,"volume":0},{"date":"2017-10-10","open":10.15,"high":10.66,"low":9.94,"close":10.08,"volume":0},{"date":"2017-10-11","open":9.95,"high":10.38,"low":9.72,"close":9.85,"volume":0},{"date":"2017-10-12","open":9.94,"high":10.33,"low":9.65,"close":9.91,"volume":0},{"date":"2017-10-13","open":9.95,"high":9.98,"low":9.44,"close":9.61,"volume":0},{"date":"2017-10-16","open":9.95,"high":10.02,"low":9.75,"close":9.91,"volume":0},{"date":"2017-10-17","open":9.85,"high":10.46,"low":9.78,"close":10.31,"volume":0},{"date":"2017-10-18","open":10.34,"high":10.41,"low":9.87,"close":10.07,"volume":0},{"date":"2017-10-19","open":10.22,"high":11.77,"low":9.99,"close":10.05,"volume":0},{"date":"2017-10-20","open":9.92,"high":10.04,"low":9.29,"close":9.97,"volume":0},{"date":"2017-10-23","open":10.25,"high":11.08,"low":9.94,"close":11.07,"volume":0},{"date":"2017-10-24","open":10.89,"high":11.16,"low":10.39,"close":11.16,"volume":0},{"date":"2017-10-25","open":11.34,"high":13.2,"low":10.99,"close":11.23,"volume":0},{"date":"2017-10-26","open":11.17,"high":11.81,"low":10.6,"close":11.3,"volume":0},{"date":"2017-10-27","open":11.12,"high":11.12,"low":9.74,"close":9.8,"volume":0},{"date":"2017-10-30","open":10.28,"high":10.89,"low":10.1,"close":10.5,"volume":0},{"date":"2017-10-31","open":10.34,"high":10.37,"low":9.9,"close":10.18,"volume":0},{"date":"2017-11-01","open":9.79,"high":10.49,"low":9.74,"close":10.2,"volume":0},{"date":"2017-11-02","open":10.44,"high":10.89,"low":9.67,"close":9.93,"volume":0},{"date":"2017-11-03","open":9.83,"high":9.91,"low":8.99,"close":9.14,"volume":0},{"date":"2017-11-06","open":9.63,"high":9.74,"low":9.38,"close":9.4,"volume":0},{"date":"2017-11-07","open":9.31,"high":10.31,"low":9.29,"close":9.89,"volume":0},{"date":"2017-11-08","open":9.79,"high":10.27,"low":9.5,"close":9.78,"volume":0},{"date":"2017-11-09","open":9.94,"high":12.19,"low":9.79,"close":10.5,"volume":0},{"date":"2017-11-10","open":10.78,"high":11.58,"low":10.5,"close":11.29,"volume":0},{"date":"2017-11-13","open":11.43,"high":12.18,"low":11.0,"close":11.5,"volume":0},{"date":"2017-11-14","open":11.53,"high":12.61,"low":11.45,"close":11.59,"volume":0},{"date":"2017-11-15","open":12.52,"high":14.51,"low":12.33,"close":13.13,"volume":0},{"date":"2017-11-16","open":12.47,"high":12.52,"low":11.38,"close":11.76,"volume":0},{"date":"2017-11-17","open":11.75,"high":12.01,"low":11.16,"close":11.43,"volume":0},{"date":"2017-11-20","open":11.96,"high":12.08,"low":10.44,"close":10.65,"volume":0},{"date":"2017-11-21","open":10.74,"high":10.78,"low":9.67,"close":9.73,"volume":0},{"date":"2017-11-22","open":9.6,"high":9.88,"low":9.32,"close":9.88,"volume":0},{"date":"2017-11-24","open":9.82,"high":9.96,"low":8.56,"close":9.67,"volume":0},{"date":"2017-11-27","open":10.07,"high":10.26,"low":9.79,"close":9.87,"volume":0},{"date":"2017-11-28","open":9.72,"high":10.31,"low":9.53,"close":10.03,"volume":0},{"date":"2017-11-29","open":9.91,"high":10.93,"low":9.81,"close":10.7,"volume":0},{"date":"2017-11-30","open":10.49,"high":12.05,"low":10.25,"close":11.28,"volume":0},{"date":"2017-12-01","open":11.19,"high":14.58,"low":10.54,"close":11.43,"volume":0},{"date":"2017-12-04","open":11.05,"high":11.86,"low":10.26,"close":11.68,"volume":0},{"date":"2017-12-05","open":11.38,"high":11.67,"low":10.65,"close":11.33,"volume":0},{"date":"2017-12-06","open":11.63,"high":11.68,"low":10.86,"close":11.02,"volume":0},{"date":"2017-12-07","open":10.9,"high":11.32,"low":10.12,"close":10.16,"volume":0},{"date":"2017-12-08","open":10.0,"high":10.06,"low":9.43,"close":9.58,"volume":0},{"date":"2017-12-11","open":9.74,"high":10.08,"low":9.28,"close":9.34,"volume":0},{"date":"2017-12-12","open":9.36,"high":9.92,"low":9.21,"close":9.92,"volume":0},{"date":"2017-12-13","open":9.78,"high":10.21,"low":9.65,"close":10.18,"volume":0},{"date":"2017-12-14","open":9.98,"high":10.54,"low":9.78,"close":10.49,"volume":0},{"date":"2017-12-15","open":10.12,"high":10.2,"low":9.22,"close":9.42,"volume":0},{"date":"2017-12-18","open":9.46,"high":9.89,"low":9.24,"close":9.53,"volume":0},{"date":"2017-12-19","open":9.4,"high":10.15,"low":9.18,"close":10.03,"volume":0},{"date":"2017-12-20","open":9.69,"high":9.85,"low":8.9,"close":9.72,"volume":0},{"date":"2017-12-21","open":9.59,"high":9.86,"low":9.2,"close":9.62,"volume":0},{"date":"2017-12-22","open":9.37,"high":10.18,"low":9.35,"close":9.9,"volume":0},{"date":"2017-12-26","open":10.19,"high":10.46,"low":10.13,"close":10.25,"volume":0},{"date":"2017-12-27","open":10.04,"high":10.79,"low":9.71,"close":10.47,"volume":0},{"date":"2017-12-28","open":10.29,"high":10.44,"low":10.07,"close":10.18,"volume":0},{"date":"2017-12-29","open":10.03,"high":11.06,"low":9.95,"close":11.04,"volume":0},{"date":"2018-01-02","open":10.95,"high":11.07,"low":9.52,"close":9.77,"volume":0},{"date":"2018-01-03","open":9.56,"high":9.65,"low":8.94,"close":9.15,"volume":0},{"date":"2018-01-04","open":9.01,"high":9.31,"low":8.92,"close":9.22,"volume":0},{"date":"2018-01-05","open":9.1,"high":9.54,"low":9.0,"close":9.22,"volume":0},{"date":"2018-01-08","open":9.61,"high":9.89,"low":9.32,"close":9.52,"volume":0},{"date":"2018-01-09","open":9.41,"high":10.09,"low":9.37,"close":10.08,"volume":0},{"date":"2018-01-10","open":10.11,"high":10.85,"low":9.82,"close":9.82,"volume":0},{"date":"2018-01-11","open":9.69,"high":10.02,"low":9.62,"close":9.88,"volume":0},{"date":"2018-01-12","open":9.74,"high":10.31,"low":9.54,"close":10.16,"volume":0},{"date":"2018-01-16","open":10.42,"high":12.41,"low":10.4,"close":11.66,"volume":0},{"date":"2018-01-17","open":11.35,"high":12.8,"low":11.18,"close":11.91,"volume":0},{"date":"2018-01-18","open":12.03,"high":12.4,"low":11.62,"close":12.23,"volume":0},{"date":"2018-01-19","open":12.3,"high":12.33,"low":11.17,"close":11.27,"volume":0},{"date":"2018-01-22","open":11.59,"high":11.62,"low":10.84,"close":11.03,"volume":0},{"date":"2018-01-23","open":10.77,"high":11.57,"low":10.76,"close":11.1,"volume":0},{"date":"2018-01-24","open":11.0,"high":12.19,"low":10.89,"close":11.47,"volume":0},{"date":"2018-01-25","open":11.27,"high":12.01,"low":11.2,"close":11.58,"volume":0},{"date":"2018-01-26","open":11.4,"high":11.6,"low":11.08,"close":11.08,"volume":0},{"date":"2018-01-29","open":11.71,"high":13.84,"low":11.68,"close":13.84,"volume":0},{"date":"2018-01-30","open":13.93,"high":15.42,"low":13.88,"close":14.79,"volume":0},{"date":"2018-01-31","open":14.23,"high":14.44,"low":13.41,"close":13.54,"volume":0},{"date":"2018-02-01","open":13.05,"high":14.3,"low":12.5,"close":13.47,"volume":0},{"date":"2018-02-02","open":13.64,"high":17.86,"low":13.64,"close":17.31,"volume":0},{"date":"2018-02-05","open":18.44,"high":38.8,"low":16.8,"close":37.32,"volume":0},{"date":"2018-02-06","open":37.32,"high":50.3,"low":22.42,"close":29.98,"volume":0},{"date":"2018-02-07","open":31.38,"high":31.64,"low":21.17,"close":27.73,"volume":0},{"date":"2018-02-08","open":27.29,"high":36.17,"low":24.41,"close":33.46,"volume":0},{"date":"2018-02-09","open":32.18,"high":41.06,"low":27.73,"close":29.06,"volume":0},{"date":"2018-02-12","open":27.25,"high":29.7,"low":24.42,"close":25.61,"volume":0},{"date":"2018-02-13","open":26.94,"high":27.82,"low":24.47,"close":24.97,"volume":0},{"date":"2018-02-14","open":23.48,"high":25.72,"low":18.99,"close":19.26,"volume":0},{"date":"2018-02-15","open":18.39,"high":20.66,"low":17.6,"close":19.13,"volume":0},{"date":"2018-02-16","open":18.74,"high":20.99,"low":17.44,"close":19.46,"volume":0},{"date":"2018-02-20","open":20.53,"high":21.61,"low":19.75,"close":20.6,"volume":0},{"date":"2018-02-21","open":20.76,"high":21.04,"low":16.97,"close":20.02,"volume":0},{"date":"2018-02-22","open":20.57,"high":20.61,"low":18.07,"close":18.72,"volume":0},{"date":"2018-02-23","open":17.96,"high":18.8,"low":16.47,"close":16.49,"volume":0},{"date":"2018-02-26","open":16.53,"high":16.94,"low":15.8,"close":15.8,"volume":0},{"date":"2018-02-27","open":15.83,"high":18.98,"low":15.29,"close":18.59,"volume":0},{"date":"2018-02-28","open":18.08,"high":20.44,"low":15.65,"close":19.85,"volume":0},{"date":"2018-03-01","open":19.96,"high":25.3,"low":19.57,"close":22.47,"volume":0},{"date":"2018-03-02","open":22.47,"high":26.22,"low":19.36,"close":19.59,"volume":0},{"date":"2018-03-05","open":21.55,"high":21.57,"low":17.94,"close":18.73,"volume":0},{"date":"2018-03-06","open":18.25,"high":19.64,"low":17.68,"close":18.36,"volume":0},{"date":"2018-03-07","open":20.11,"high":20.49,"low":17.52,"close":17.76,"volume":0},{"date":"2018-03-08","open":17.56,"high":17.68,"low":14.91,"close":16.54,"volume":0},{"date":"2018-03-09","open":16.41,"high":16.75,"low":13.31,"close":14.64,"volume":0},{"date":"2018-03-12","open":15.28,"high":16.35,"low":15.18,"close":15.78,"volume":0},{"date":"2018-03-13","open":15.7,"high":16.98,"low":15.03,"close":16.35,"volume":0},{"date":"2018-03-14","open":16.59,"high":17.59,"low":14.94,"close":17.23,"volume":0},{"date":"2018-03-15","open":16.99,"high":17.41,"low":15.96,"close":16.59,"volume":0},{"date":"2018-03-16","open":16.6,"high":16.72,"low":15.23,"close":15.8,"volume":0},{"date":"2018-03-19","open":16.63,"high":21.87,"low":16.56,"close":19.02,"volume":0},{"date":"2018-03-20","open":18.38,"high":19.31,"low":18.09,"close":18.2,"volume":0},{"date":"2018-03-21","open":17.76,"high":18.37,"low":16.26,"close":17.86,"volume":0},{"date":"2018-03-22","open":18.13,"high":23.81,"low":18.12,"close":23.34,"volume":0},{"date":"2018-03-23","open":24.02,"high":26.01,"low":21.63,"close":24.87,"volume":0},{"date":"2018-03-26","open":23.41,"high":24.54,"low":20.71,"close":21.03,"volume":0},{"date":"2018-03-27","open":20.33,"high":24.06,"low":19.84,"close":22.5,"volume":0},{"date":"2018-03-28","open":22.52,"high":24.94,"low":21.71,"close":22.87,"volume":0},{"date":"2018-03-29","open":22.87,"high":23.05,"low":19.6,"close":19.97,"volume":0},{"date":"2018-04-02","open":21.07,"high":25.72,"low":20.44,"close":23.62,"volume":0},{"date":"2018-04-03","open":23.03,"high":23.38,"low":20.92,"close":21.1,"volume":0},{"date":"2018-04-04","open":21.68,"high":24.51,"low":19.86,"close":20.06,"volume":0},{"date":"2018-04-05","open":19.76,"high":20.21,"low":18.57,"close":18.94,"volume":0},{"date":"2018-04-06","open":20.33,"high":23.12,"low":18.6,"close":21.49,"volume":0},{"date":"2018-04-09","open":21.27,"high":22.02,"low":20.34,"close":21.77,"volume":0},{"date":"2018-04-10","open":20.51,"high":21.68,"low":20.24,"close":20.47,"volume":0},{"date":"2018-04-11","open":20.95,"high":21.66,"low":19.64,"close":20.24,"volume":0},{"date":"2018-04-12","open":19.83,"high":19.92,"low":18.16,"close":18.49,"volume":0},{"date":"2018-04-13","open":18.27,"high":18.45,"low":17.26,"close":17.41,"volume":0},{"date":"2018-04-16","open":17.59,"high":17.66,"low":16.38,"close":16.56,"volume":0},{"date":"2018-04-17","open":16.16,"high":16.27,"low":14.57,"close":15.25,"volume":0},{"date":"2018-04-18","open":15.3,"high":16.9,"low":14.95,"close":15.6,"volume":0},{"date":"2018-04-19","open":15.55,"high":16.92,"low":15.16,"close":15.96,"volume":0},{"date":"2018-04-20","open":16.16,"high":17.5,"low":15.19,"close":16.88,"volume":0},{"date":"2018-04-23","open":17.29,"high":17.56,"low":15.79,"close":16.34,"volume":0},{"date":"2018-04-24","open":16.16,"high":19.66,"low":15.37,"close":18.02,"volume":0},{"date":"2018-04-25","open":18.14,"high":19.84,"low":17.75,"close":17.84,"volume":0},{"date":"2018-04-26","open":18.07,"high":18.12,"low":16.24,"close":16.24,"volume":0},{"date":"2018-04-27","open":16.22,"high":16.77,"low":15.25,"close":15.41,"volume":0},{"date":"2018-04-30","open":15.39,"high":16.35,"low":15.13,"close":15.93,"volume":0},{"date":"2018-05-01","open":15.78,"high":16.82,"low":15.42,"close":15.49,"volume":0},{"date":"2018-05-02","open":15.48,"high":15.97,"low":14.75,"close":15.97,"volume":0},{"date":"2018-05-03","open":15.78,"high":18.66,"low":15.43,"close":15.9,"volume":0},{"date":"2018-05-04","open":15.94,"high":16.92,"low":10.91,"close":14.77,"volume":0},{"date":"2018-05-07","open":15.32,"high":15.52,"low":14.51,"close":14.75,"volume":0},{"date":"2018-05-08","open":14.53,"high":15.56,"low":14.52,"close":14.71,"volume":0},{"date":"2018-05-09","open":14.54,"high":14.63,"low":13.38,"close":13.42,"volume":0},{"date":"2018-05-10","open":13.36,"high":13.63,"low":12.92,"close":13.23,"volume":0},{"date":"2018-05-11","open":13.22,"high":13.44,"low":12.65,"close":12.65,"volume":0},{"date":"2018-05-14","open":12.95,"high":13.28,"low":12.81,"close":12.93,"volume":0},{"date":"2018-05-15","open":13.13,"high":15.01,"low":12.5,"close":14.63,"volume":0},{"date":"2018-05-16","open":14.38,"high":14.91,"low":13.21,"close":13.42,"volume":0},{"date":"2018-05-17","open":13.54,"high":13.86,"low":12.65,"close":13.43,"volume":0},{"date":"2018-05-18","open":13.18,"high":13.87,"low":13.06,"close":13.42,"volume":0},{"date":"2018-05-21","open":13.44,"high":13.59,"low":12.78,"close":13.08,"volume":0},{"date":"2018-05-22","open":13.03,"high":13.42,"low":12.77,"close":13.22,"volume":0},{"date":"2018-05-23","open":13.5,"high":14.6,"low":12.49,"close":12.58,"volume":0},{"date":"2018-05-24","open":12.73,"high":14.24,"low":12.53,"close":12.53,"volume":0},{"date":"2018-05-25","open":12.44,"high":13.52,"low":12.29,"close":13.22,"volume":0},{"date":"2018-05-29","open":14.39,"high":18.78,"low":14.39,"close":17.02,"volume":0},{"date":"2018-05-30","open":16.6,"high":16.64,"low":14.65,"close":14.94,"volume":0},{"date":"2018-05-31","open":14.93,"high":16.29,"low":14.2,"close":15.43,"volume":0},{"date":"2018-06-01","open":14.92,"high":14.93,"low":13.37,"close":13.46,"volume":0},{"date":"2018-06-04","open":13.91,"high":13.91,"low":12.69,"close":12.74,"volume":0},{"date":"2018-06-05","open":12.91,"high":13.34,"low":12.3,"close":12.4,"volume":0},{"date":"2018-06-06","open":12.1,"high":12.56,"low":11.62,"close":11.64,"volume":0},{"date":"2018-06-07","open":11.66,"high":13.28,"low":11.22,"close":12.13,"volume":0},{"date":"2018-06-08","open":12.54,"high":13.31,"low":12.09,"close":12.18,"volume":0},{"date":"2018-06-11","open":12.52,"high":12.69,"low":12.14,"close":12.35,"volume":0},{"date":"2018-06-12","open":12.29,"high":12.6,"low":11.88,"close":12.34,"volume":0},{"date":"2018-06-13","open":12.13,"high":12.95,"low":11.98,"close":12.94,"volume":0},{"date":"2018-06-14","open":12.98,"high":13.07,"low":11.88,"close":12.12,"volume":0},{"date":"2018-06-15","open":12.19,"high":13.16,"low":11.93,"close":11.98,"volume":0},{"date":"2018-06-18","open":12.79,"high":13.74,"low":12.28,"close":12.31,"volume":0},{"date":"2018-06-19","open":14.61,"high":14.68,"low":13.21,"close":13.35,"volume":0},{"date":"2018-06-20","open":12.9,"high":13.02,"low":12.25,"close":12.79,"volume":0},{"date":"2018-06-21","open":12.54,"high":15.18,"low":12.18,"close":14.64,"volume":0},{"date":"2018-06-22","open":14.6,"high":14.6,"low":13.11,"close":13.77,"volume":0},{"date":"2018-06-25","open":15.07,"high":19.61,"low":14.56,"close":17.33,"volume":0},{"date":"2018-06-26","open":16.71,"high":17.54,"low":15.1,"close":15.92,"volume":0},{"date":"2018-06-27","open":16.52,"high":18.19,"low":14.76,"close":17.91,"volume":0},{"date":"2018-06-28","open":17.54,"high":18.99,"low":16.4,"close":16.85,"volume":0},{"date":"2018-06-29","open":15.73,"high":16.51,"low":14.66,"close":16.09,"volume":0},{"date":"2018-07-02","open":17.7,"high":18.08,"low":15.54,"close":15.6,"volume":0},{"date":"2018-07-03","open":15.37,"high":16.45,"low":14.68,"close":16.14,"volume":0},{"date":"2018-07-05","open":15.62,"high":16.22,"low":14.47,"close":14.97,"volume":0},{"date":"2018-07-06","open":14.99,"high":15.45,"low":13.34,"close":13.37,"volume":0},{"date":"2018-07-09","open":13.42,"high":13.45,"low":12.6,"close":12.69,"volume":0},{"date":"2018-07-10","open":12.52,"high":13.21,"low":11.93,"close":12.64,"volume":0},{"date":"2018-07-11","open":14.05,"high":14.15,"low":13.09,"close":13.63,"volume":0},{"date":"2018-07-12","open":13.07,"high":13.33,"low":12.42,"close":12.58,"volume":0},{"date":"2018-07-13","open":12.39,"high":12.97,"low":11.62,"close":12.18,"volume":0}]}}`)

	gock.New("https://api.tradier.com/v1").
		Get("/markets/quotes").
		Reply(200).
		BodyString(`{"quotes":{"quote":{"symbol":"VIX","description":"CBOE Volatility S&P 500 Index","exch":"C","type":"index","last":12.18,"change":-0.41,"change_percentage":-3.18,"volume":0,"average_volume":0,"last_volume":0,"trade_date":1531512894000,"open":12.39,"high":12.97,"low":11.62,"close":null,"prevclose":12.58,"week_52_high":0.0,"week_52_low":0.0,"bid":null,"bidsize":0,"bidexch":null,"bid_date":0,"ask":null,"asksize":0,"askexch":null,"ask_date":0,"root_symbols":"VIX"}}}`)

	// Start the db connection.
	db, _ := models.NewDB()

	// Create controller
	c := &Controller{DB: db}

	// Make a mock request.
	req, _ := http.NewRequest("GET", "/api/v1/quotes/rank/vix", nil)
	req.Header.Set("Accept", "application/json")

	// Setup GIN Router
	gin.SetMode("release")
	gin.DisableConsoleColor()
	r := gin.New()
	r.Use(func(c *gin.Context) { c.Set("userId", uint(1)) })
	r.GET("/api/v1/quotes/rank/:symb", c.GetRank)

	// Setup writer.
	w := httptest.NewRecorder()
	r.ServeHTTP(w, req)

	fmt.Println(w.Body.String())

}

//
// Test - GetOptionsChainByExpiration
//
func TestGetOptionsChainByExpiration01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New("https://api.tradier.com/v1").
		Get("/markets/options/chains").
		Reply(200).
		BodyString(`{"options":{"option":[{"symbol":"SPY180404C00278000","description":"SPY Apr 4 2018 $278.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":3,"average_volume":0,"last_volume":3,"trade_date":1522765013000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522762243000,"ask":0.01,"asksize":3033,"askexch":"X","ask_date":1522786499000,"open_interest":1076,"underlying":"SPY","strike":278.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00200000","description":"SPY Apr 4 2018 $200.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":4,"trade_date":1522171521000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522762216000,"ask":0.01,"asksize":3615,"askexch":"X","ask_date":1522786499000,"open_interest":632,"underlying":"SPY","strike":200.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00265000","description":"SPY Apr 4 2018 $265.00 Call","exch":"Z","type":"option","last":0.12,"change":0.0,"change_percentage":0.0,"volume":7908,"average_volume":0,"last_volume":50,"trade_date":1522786491000,"open":0.1,"high":0.23,"low":0.01,"close":0.12,"prevclose":0.12,"week_52_high":0.0,"week_52_low":0.0,"bid":0.11,"bidsize":128,"bidexch":"I","bid_date":1522786499000,"ask":0.13,"asksize":635,"askexch":"P","ask_date":1522786499000,"open_interest":7311,"underlying":"SPY","strike":265.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00239000","description":"SPY Apr 4 2018 $239.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":21.58,"bidsize":68,"bidexch":"N","bid_date":1522786499000,"ask":21.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":239.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00252000","description":"SPY Apr 4 2018 $252.00 Call","exch":"Z","type":"option","last":8.4,"change":2.62,"change_percentage":45.08,"volume":261,"average_volume":0,"last_volume":10,"trade_date":1522784710000,"open":7.32,"high":8.69,"low":5.73,"close":8.4,"prevclose":5.79,"week_52_high":0.0,"week_52_low":0.0,"bid":8.63,"bidsize":291,"bidexch":"X","bid_date":1522786495000,"ask":8.97,"asksize":45,"askexch":"N","ask_date":1522786495000,"open_interest":104,"underlying":"SPY","strike":252.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00226000","description":"SPY Apr 4 2018 $226.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":34.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":34.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":226.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00273000","description":"SPY Apr 4 2018 $273.00 Put","exch":"Z","type":"option","last":10.87,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":2,"trade_date":1522339695000,"open":null,"high":null,"low":null,"close":null,"prevclose":10.87,"week_52_high":0.0,"week_52_low":0.0,"bid":12.09,"bidsize":299,"bidexch":"C","bid_date":1522786496000,"ask":12.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":187,"underlying":"SPY","strike":273.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00247000","description":"SPY Apr 4 2018 $247.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.13,"change_percentage":-86.67,"volume":4418,"average_volume":0,"last_volume":1,"trade_date":1522785123000,"open":0.06,"high":0.19,"low":0.01,"close":0.02,"prevclose":0.15,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":1625,"bidexch":"P","bid_date":1522786499000,"ask":0.02,"asksize":1291,"askexch":"I","ask_date":1522786499000,"open_interest":4710,"underlying":"SPY","strike":247.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00260000","description":"SPY Apr 4 2018 $260.00 Put","exch":"Z","type":"option","last":1.1,"change":-2.73,"change_percentage":-71.28,"volume":19070,"average_volume":0,"last_volume":98,"trade_date":1522786498000,"open":2.42,"high":3.84,"low":1.05,"close":1.1,"prevclose":3.83,"week_52_high":0.0,"week_52_low":0.0,"bid":1.06,"bidsize":325,"bidexch":"P","bid_date":1522786499000,"ask":1.1,"asksize":325,"askexch":"P","ask_date":1522786499000,"open_interest":6498,"underlying":"SPY","strike":260.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00234000","description":"SPY Apr 4 2018 $234.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.03,"change_percentage":-75.0,"volume":26,"average_volume":0,"last_volume":2,"trade_date":1522778096000,"open":0.02,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2425,"askexch":"Q","ask_date":1522786499000,"open_interest":52,"underlying":"SPY","strike":234.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00200000","description":"SPY Apr 4 2018 $200.00 Call","exch":"Z","type":"option","last":58.0,"change":-17.02,"change_percentage":-22.68,"volume":8,"average_volume":0,"last_volume":5,"trade_date":1522765980000,"open":58.0,"high":58.0,"low":58.0,"close":58.0,"prevclose":75.01,"week_52_high":0.0,"week_52_low":0.0,"bid":60.56,"bidsize":220,"bidexch":"X","bid_date":1522786496000,"ask":60.92,"asksize":219,"askexch":"X","ask_date":1522786496000,"open_interest":10,"underlying":"SPY","strike":200.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00221000","description":"SPY Apr 4 2018 $221.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":23,"trade_date":1522676132000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3496,"askexch":"X","ask_date":1522786499000,"open_interest":63,"underlying":"SPY","strike":221.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00300000","description":"SPY Apr 4 2018 $300.00 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":39.09,"bidsize":299,"bidexch":"X","bid_date":1522786495000,"ask":39.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":300.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00273000","description":"SPY Apr 4 2018 $273.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":3,"trade_date":1522695417000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522762209000,"ask":0.01,"asksize":3585,"askexch":"X","ask_date":1522786499000,"open_interest":5448,"underlying":"SPY","strike":273.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00247000","description":"SPY Apr 4 2018 $247.00 Call","exch":"Z","type":"option","last":13.18,"change":2.68,"change_percentage":25.53,"volume":38,"average_volume":0,"last_volume":5,"trade_date":1522784913000,"open":10.5,"high":13.18,"low":10.4,"close":13.18,"prevclose":10.5,"week_52_high":0.0,"week_52_low":0.0,"bid":13.58,"bidsize":216,"bidexch":"X","bid_date":1522786496000,"ask":13.92,"asksize":200,"askexch":"X","ask_date":1522786496000,"open_interest":15,"underlying":"SPY","strike":247.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00268000","description":"SPY Apr 4 2018 $268.00 Put","exch":"Z","type":"option","last":7.35,"change":-3.22,"change_percentage":-30.4,"volume":75,"average_volume":0,"last_volume":20,"trade_date":1522785552000,"open":9.36,"high":10.06,"low":7.15,"close":7.35,"prevclose":10.56,"week_52_high":0.0,"week_52_low":0.0,"bid":7.08,"bidsize":45,"bidexch":"N","bid_date":1522786499000,"ask":7.43,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":1178,"underlying":"SPY","strike":268.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00260000","description":"SPY Apr 4 2018 $260.00 Call","exch":"Z","type":"option","last":1.81,"change":0.88,"change_percentage":94.63,"volume":44047,"average_volume":0,"last_volume":1,"trade_date":1522786444000,"open":1.33,"high":2.35,"low":0.58,"close":1.81,"prevclose":0.93,"week_52_high":0.0,"week_52_low":0.0,"bid":1.81,"bidsize":24,"bidexch":"I","bid_date":1522786499000,"ask":1.8900000000000001,"asksize":47,"askexch":"N","ask_date":1522786497000,"open_interest":8509,"underlying":"SPY","strike":260.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00234000","description":"SPY Apr 4 2018 $234.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":26.57,"bidsize":45,"bidexch":"N","bid_date":1522786497000,"ask":26.93,"asksize":45,"askexch":"N","ask_date":1522786497000,"open_interest":0,"underlying":"SPY","strike":234.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00281000","description":"SPY Apr 4 2018 $281.00 Put","exch":"Z","type":"option","last":22.06,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":2,"trade_date":1522682745000,"open":null,"high":null,"low":null,"close":null,"prevclose":22.06,"week_52_high":0.0,"week_52_low":0.0,"bid":20.09,"bidsize":47,"bidexch":"N","bid_date":1522786496000,"ask":20.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":2,"underlying":"SPY","strike":281.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00255000","description":"SPY Apr 4 2018 $255.00 Put","exch":"Z","type":"option","last":0.16,"change":-1.23,"change_percentage":-88.49,"volume":56532,"average_volume":0,"last_volume":341,"trade_date":1522786491000,"open":0.63,"high":1.42,"low":0.16,"close":0.16,"prevclose":1.3900000000000001,"week_52_high":0.0,"week_52_low":0.0,"bid":0.15,"bidsize":858,"bidexch":"X","bid_date":1522786499000,"ask":0.17,"asksize":942,"askexch":"Q","ask_date":1522786499000,"open_interest":11790,"underlying":"SPY","strike":255.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00229000","description":"SPY Apr 4 2018 $229.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.02,"change_percentage":-66.67,"volume":103,"average_volume":0,"last_volume":2,"trade_date":1522764607000,"open":0.02,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.03,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2793,"askexch":"Q","ask_date":1522786499000,"open_interest":7120,"underlying":"SPY","strike":229.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00221000","description":"SPY Apr 4 2018 $221.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":39.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":39.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":221.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00300000","description":"SPY Apr 4 2018 $300.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1521657701000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3349,"askexch":"X","ask_date":1522786499000,"open_interest":318,"underlying":"SPY","strike":300.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00242000","description":"SPY Apr 4 2018 $242.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.07,"change_percentage":-85.72,"volume":275,"average_volume":0,"last_volume":3,"trade_date":1522784811000,"open":0.03,"high":0.05,"low":0.01,"close":0.01,"prevclose":0.07,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":732,"askexch":"H","ask_date":1522786499000,"open_interest":2047,"underlying":"SPY","strike":242.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00268000","description":"SPY Apr 4 2018 $268.00 Call","exch":"Z","type":"option","last":0.01,"change":-0.02,"change_percentage":-66.67,"volume":4360,"average_volume":0,"last_volume":20,"trade_date":1522786429000,"open":0.02,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.03,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":500,"bidexch":"W","bid_date":1522784037000,"ask":0.02,"asksize":4883,"askexch":"X","ask_date":1522786499000,"open_interest":6706,"underlying":"SPY","strike":268.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00281000","description":"SPY Apr 4 2018 $281.00 Call","exch":"Z","type":"option","last":0.03,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":200,"trade_date":1522158693000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.03,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3132,"askexch":"X","ask_date":1522786499000,"open_interest":527,"underlying":"SPY","strike":281.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00255000","description":"SPY Apr 4 2018 $255.00 Call","exch":"Z","type":"option","last":6.0,"change":2.46,"change_percentage":69.5,"volume":537,"average_volume":0,"last_volume":3,"trade_date":1522785584000,"open":4.14,"high":6.04,"low":3.32,"close":6.0,"prevclose":3.54,"week_52_high":0.0,"week_52_low":0.0,"bid":5.9,"bidsize":3,"bidexch":"Q","bid_date":1522786497000,"ask":6.09,"asksize":100,"askexch":"W","ask_date":1522786500000,"open_interest":2771,"underlying":"SPY","strike":255.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00229000","description":"SPY Apr 4 2018 $229.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":31.58,"bidsize":299,"bidexch":"X","bid_date":1522786499000,"ask":31.92,"asksize":200,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":229.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00276000","description":"SPY Apr 4 2018 $276.00 Put","exch":"Z","type":"option","last":14.5,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522253782000,"open":null,"high":null,"low":null,"close":null,"prevclose":14.5,"week_52_high":0.0,"week_52_low":0.0,"bid":15.09,"bidsize":285,"bidexch":"X","bid_date":1522786495000,"ask":15.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":276.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00242000","description":"SPY Apr 4 2018 $242.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":18.58,"bidsize":45,"bidexch":"N","bid_date":1522786499000,"ask":18.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":242.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00263000","description":"SPY Apr 4 2018 $263.00 Put","exch":"Z","type":"option","last":3.06,"change":-2.7199999999999998,"change_percentage":-47.06,"volume":720,"average_volume":0,"last_volume":1,"trade_date":1522785060000,"open":4.48,"high":5.8,"low":2.5,"close":3.06,"prevclose":5.78,"week_52_high":0.0,"week_52_low":0.0,"bid":2.63,"bidsize":10,"bidexch":"I","bid_date":1522786499000,"ask":2.7800000000000002,"asksize":10,"askexch":"I","ask_date":1522786499000,"open_interest":9621,"underlying":"SPY","strike":263.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00237000","description":"SPY Apr 4 2018 $237.00 Put","exch":"Z","type":"option","last":0.05,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1522699174000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2773,"askexch":"X","ask_date":1522786499000,"open_interest":6222,"underlying":"SPY","strike":237.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00250000","description":"SPY Apr 4 2018 $250.00 Put","exch":"Z","type":"option","last":0.03,"change":-0.31,"change_percentage":-90.91,"volume":29252,"average_volume":0,"last_volume":164,"trade_date":1522786485000,"open":0.09,"high":0.42,"low":0.03,"close":0.03,"prevclose":0.33,"week_52_high":0.0,"week_52_low":0.0,"bid":0.02,"bidsize":1025,"bidexch":"P","bid_date":1522786499000,"ask":0.03,"asksize":3034,"askexch":"X","ask_date":1522786499000,"open_interest":15834,"underlying":"SPY","strike":250.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00224000","description":"SPY Apr 4 2018 $224.00 Put","exch":"Z","type":"option","last":0.04,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522694204000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3444,"askexch":"X","ask_date":1522786499000,"open_interest":4,"underlying":"SPY","strike":224.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00276000","description":"SPY Apr 4 2018 $276.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":12,"trade_date":1522691387000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786476000,"ask":0.01,"asksize":3014,"askexch":"X","ask_date":1522786499000,"open_interest":804,"underlying":"SPY","strike":276.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00263000","description":"SPY Apr 4 2018 $263.00 Call","exch":"Z","type":"option","last":0.48,"change":0.24,"change_percentage":100.0,"volume":20179,"average_volume":0,"last_volume":20,"trade_date":1522786499000,"open":0.36,"high":0.77,"low":0.08,"close":0.48,"prevclose":0.24,"week_52_high":0.0,"week_52_low":0.0,"bid":0.46,"bidsize":650,"bidexch":"P","bid_date":1522786499000,"ask":0.5,"asksize":478,"askexch":"Q","ask_date":1522786499000,"open_interest":6585,"underlying":"SPY","strike":263.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00237000","description":"SPY Apr 4 2018 $237.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":23.58,"bidsize":68,"bidexch":"N","bid_date":1522786499000,"ask":23.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":237.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00284000","description":"SPY Apr 4 2018 $284.00 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":23.09,"bidsize":199,"bidexch":"I","bid_date":1522786499000,"ask":23.44,"asksize":200,"askexch":"C","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":284.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00258000","description":"SPY Apr 4 2018 $258.00 Put","exch":"Z","type":"option","last":0.55,"change":-1.97,"change_percentage":-78.18,"volume":34345,"average_volume":0,"last_volume":1,"trade_date":1522786473000,"open":1.5,"high":2.66,"low":0.52,"close":0.55,"prevclose":2.52,"week_52_high":0.0,"week_52_low":0.0,"bid":0.52,"bidsize":713,"bidexch":"X","bid_date":1522786499000,"ask":0.55,"asksize":550,"askexch":"P","ask_date":1522786499000,"open_interest":5331,"underlying":"SPY","strike":258.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00250000","description":"SPY Apr 4 2018 $250.00 Call","exch":"Z","type":"option","last":10.23,"change":2.01,"change_percentage":24.46,"volume":112,"average_volume":0,"last_volume":2,"trade_date":1522782289000,"open":8.73,"high":10.23,"low":7.79,"close":10.23,"prevclose":8.22,"week_52_high":0.0,"week_52_low":0.0,"bid":10.6,"bidsize":141,"bidexch":"N","bid_date":1522786500000,"ask":10.95,"asksize":45,"askexch":"N","ask_date":1522786496000,"open_interest":562,"underlying":"SPY","strike":250.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00224000","description":"SPY Apr 4 2018 $224.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":36.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":36.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":224.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00271000","description":"SPY Apr 4 2018 $271.00 Put","exch":"Z","type":"option","last":12.16,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":18,"trade_date":1522682203000,"open":null,"high":null,"low":null,"close":null,"prevclose":12.16,"week_52_high":0.0,"week_52_low":0.0,"bid":10.09,"bidsize":349,"bidexch":"N","bid_date":1522786496000,"ask":10.45,"asksize":205,"askexch":"C","ask_date":1522786496000,"open_interest":757,"underlying":"SPY","strike":271.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00245000","description":"SPY Apr 4 2018 $245.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.09,"change_percentage":-81.82,"volume":1472,"average_volume":0,"last_volume":2,"trade_date":1522785135000,"open":0.05,"high":0.12,"low":0.02,"close":0.02,"prevclose":0.11,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":400,"bidexch":"P","bid_date":1522786499000,"ask":0.02,"asksize":4121,"askexch":"X","ask_date":1522786499000,"open_interest":5879,"underlying":"SPY","strike":245.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00232000","description":"SPY Apr 4 2018 $232.00 Put","exch":"Z","type":"option","last":0.05,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1522697618000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2543,"askexch":"Q","ask_date":1522786499000,"open_interest":763,"underlying":"SPY","strike":232.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00284000","description":"SPY Apr 4 2018 $284.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1000,"trade_date":1522347412000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3337,"askexch":"X","ask_date":1522786499000,"open_interest":1100,"underlying":"SPY","strike":284.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00258000","description":"SPY Apr 4 2018 $258.00 Call","exch":"Z","type":"option","last":3.25,"change":1.53,"change_percentage":88.96,"volume":16427,"average_volume":0,"last_volume":1,"trade_date":1522786472000,"open":2.58,"high":3.81,"low":1.42,"close":3.25,"prevclose":1.72,"week_52_high":0.0,"week_52_low":0.0,"bid":3.25,"bidsize":10,"bidexch":"I","bid_date":1522786499000,"ask":3.4,"asksize":10,"askexch":"I","ask_date":1522786498000,"open_interest":6197,"underlying":"SPY","strike":258.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00279000","description":"SPY Apr 4 2018 $279.00 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":18.09,"bidsize":68,"bidexch":"N","bid_date":1522786496000,"ask":18.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":0,"underlying":"SPY","strike":279.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00271000","description":"SPY Apr 4 2018 $271.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":31,"average_volume":0,"last_volume":2,"trade_date":1522778959000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522764103000,"ask":0.01,"asksize":3934,"askexch":"X","ask_date":1522786499000,"open_interest":14354,"underlying":"SPY","strike":271.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00245000","description":"SPY Apr 4 2018 $245.00 Call","exch":"Z","type":"option","last":14.5,"change":1.6,"change_percentage":12.41,"volume":2,"average_volume":0,"last_volume":2,"trade_date":1522781922000,"open":14.5,"high":14.5,"low":14.5,"close":14.5,"prevclose":12.9,"week_52_high":0.0,"week_52_low":0.0,"bid":15.58,"bidsize":216,"bidexch":"X","bid_date":1522786495000,"ask":15.93,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":14,"underlying":"SPY","strike":245.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00266000","description":"SPY Apr 4 2018 $266.00 Put","exch":"Z","type":"option","last":5.85,"change":-4.46,"change_percentage":-43.21,"volume":145,"average_volume":0,"last_volume":5,"trade_date":1522784997000,"open":6.64,"high":8.08,"low":5.39,"close":5.85,"prevclose":10.3,"week_52_high":0.0,"week_52_low":0.0,"bid":5.11,"bidsize":182,"bidexch":"X","bid_date":1522786498000,"ask":5.46,"asksize":235,"askexch":"X","ask_date":1522786497000,"open_interest":1051,"underlying":"SPY","strike":266.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00232000","description":"SPY Apr 4 2018 $232.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":28.57,"bidsize":290,"bidexch":"X","bid_date":1522786496000,"ask":28.92,"asksize":200,"askexch":"X","ask_date":1522786496000,"open_interest":0,"underlying":"SPY","strike":232.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00253000","description":"SPY Apr 4 2018 $253.00 Put","exch":"Z","type":"option","last":0.08,"change":-0.71,"change_percentage":-89.75,"volume":8599,"average_volume":0,"last_volume":10,"trade_date":1522786400000,"open":0.35,"high":0.89,"low":0.06,"close":0.08,"prevclose":0.78,"week_52_high":0.0,"week_52_low":0.0,"bid":0.06,"bidsize":1409,"bidexch":"X","bid_date":1522786499000,"ask":0.08,"asksize":3104,"askexch":"X","ask_date":1522786499000,"open_interest":6154,"underlying":"SPY","strike":253.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00227000","description":"SPY Apr 4 2018 $227.00 Put","exch":"Z","type":"option","last":0.04,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":5,"trade_date":1522695514000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3279,"askexch":"X","ask_date":1522786499000,"open_interest":11,"underlying":"SPY","strike":227.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00240000","description":"SPY Apr 4 2018 $240.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.04,"change_percentage":-80.0,"volume":2039,"average_volume":0,"last_volume":5,"trade_date":1522782581000,"open":0.02,"high":0.05,"low":0.01,"close":0.01,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":1225,"askexch":"P","ask_date":1522786499000,"open_interest":7060,"underlying":"SPY","strike":240.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00279000","description":"SPY Apr 4 2018 $279.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522770536000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786476000,"ask":0.01,"asksize":3547,"askexch":"I","ask_date":1522786499000,"open_interest":13619,"underlying":"SPY","strike":279.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00266000","description":"SPY Apr 4 2018 $266.00 Call","exch":"Z","type":"option","last":0.04,"change":0.0,"change_percentage":0.0,"volume":5187,"average_volume":0,"last_volume":50,"trade_date":1522786491000,"open":0.05,"high":0.1,"low":0.01,"close":0.04,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.04,"bidsize":995,"bidexch":"P","bid_date":1522786499000,"ask":0.05,"asksize":43,"askexch":"Z","ask_date":1522786498000,"open_interest":5951,"underlying":"SPY","strike":266.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00253000","description":"SPY Apr 4 2018 $253.00 Call","exch":"Z","type":"option","last":8.05,"change":3.09,"change_percentage":61.98,"volume":468,"average_volume":0,"last_volume":3,"trade_date":1522783682000,"open":5.77,"high":8.2,"low":5.03,"close":8.05,"prevclose":4.97,"week_52_high":0.0,"week_52_low":0.0,"bid":7.66,"bidsize":294,"bidexch":"X","bid_date":1522786495000,"ask":7.99,"asksize":200,"askexch":"C","ask_date":1522786498000,"open_interest":194,"underlying":"SPY","strike":253.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00195000","description":"SPY Apr 4 2018 $195.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":114,"trade_date":1522352573000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3620,"askexch":"X","ask_date":1522786499000,"open_interest":330,"underlying":"SPY","strike":195.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00227000","description":"SPY Apr 4 2018 $227.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":33.58,"bidsize":299,"bidexch":"X","bid_date":1522786499000,"ask":33.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":227.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00274000","description":"SPY Apr 4 2018 $274.00 Put","exch":"Z","type":"option","last":15.5,"change":-2.43,"change_percentage":-13.56,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522779775000,"open":15.5,"high":15.5,"low":15.5,"close":15.5,"prevclose":17.93,"week_52_high":0.0,"week_52_low":0.0,"bid":13.09,"bidsize":299,"bidexch":"C","bid_date":1522786496000,"ask":13.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":126,"underlying":"SPY","strike":274.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00248000","description":"SPY Apr 4 2018 $248.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.19,"change_percentage":-90.48,"volume":4500,"average_volume":0,"last_volume":25,"trade_date":1522784546000,"open":0.1,"high":0.26,"low":0.02,"close":0.02,"prevclose":0.21,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":1975,"bidexch":"P","bid_date":1522786499000,"ask":0.02,"asksize":1122,"askexch":"X","ask_date":1522786499000,"open_interest":6020,"underlying":"SPY","strike":248.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00240000","description":"SPY Apr 4 2018 $240.00 Call","exch":"Z","type":"option","last":19.54,"change":3.64,"change_percentage":22.9,"volume":10,"average_volume":0,"last_volume":7,"trade_date":1522767761000,"open":18.6,"high":19.54,"low":18.6,"close":19.54,"prevclose":15.9,"week_52_high":0.0,"week_52_low":0.0,"bid":20.58,"bidsize":58,"bidexch":"N","bid_date":1522786499000,"ask":20.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":13,"underlying":"SPY","strike":240.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00261000","description":"SPY Apr 4 2018 $261.00 Put","exch":"Z","type":"option","last":1.51,"change":-2.87,"change_percentage":-65.45,"volume":4143,"average_volume":0,"last_volume":100,"trade_date":1522786482000,"open":3.08,"high":4.6,"low":1.43,"close":1.51,"prevclose":4.37,"week_52_high":0.0,"week_52_low":0.0,"bid":1.48,"bidsize":225,"bidexch":"P","bid_date":1522786499000,"ask":1.53,"asksize":225,"askexch":"P","ask_date":1522786499000,"open_interest":4061,"underlying":"SPY","strike":261.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00235000","description":"SPY Apr 4 2018 $235.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.03,"change_percentage":-75.0,"volume":301,"average_volume":0,"last_volume":1,"trade_date":1522776119000,"open":0.03,"high":0.03,"low":0.01,"close":0.01,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2994,"askexch":"X","ask_date":1522786499000,"open_interest":61338,"underlying":"SPY","strike":235.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00222000","description":"SPY Apr 4 2018 $222.00 Put","exch":"Z","type":"option","last":0.06,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1522267459000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.06,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3487,"askexch":"X","ask_date":1522786499000,"open_interest":10,"underlying":"SPY","strike":222.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00195000","description":"SPY Apr 4 2018 $195.00 Call","exch":"Z","type":"option","last":80.04,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1521229800000,"open":null,"high":null,"low":null,"close":null,"prevclose":80.04,"week_52_high":0.0,"week_52_low":0.0,"bid":65.56,"bidsize":300,"bidexch":"C","bid_date":1522786496000,"ask":65.92,"asksize":279,"askexch":"C","ask_date":1522786496000,"open_interest":128,"underlying":"SPY","strike":195.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00274000","description":"SPY Apr 4 2018 $274.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":4,"trade_date":1522680723000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522762209000,"ask":0.01,"asksize":3853,"askexch":"X","ask_date":1522786499000,"open_interest":603,"underlying":"SPY","strike":274.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00248000","description":"SPY Apr 4 2018 $248.00 Call","exch":"Z","type":"option","last":12.74,"change":4.22,"change_percentage":49.36,"volume":19,"average_volume":0,"last_volume":18,"trade_date":1522783451000,"open":11.0,"high":12.74,"low":11.0,"close":12.74,"prevclose":8.53,"week_52_high":0.0,"week_52_low":0.0,"bid":12.58,"bidsize":227,"bidexch":"C","bid_date":1522786496000,"ask":12.94,"asksize":45,"askexch":"N","ask_date":1522786497000,"open_interest":20,"underlying":"SPY","strike":248.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00295000","description":"SPY Apr 4 2018 $295.00 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":34.09,"bidsize":299,"bidexch":"X","bid_date":1522786495000,"ask":34.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":295.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00269000","description":"SPY Apr 4 2018 $269.00 Put","exch":"Z","type":"option","last":9.06,"change":-2.79,"change_percentage":-23.55,"volume":13,"average_volume":0,"last_volume":5,"trade_date":1522782134000,"open":11.07,"high":11.84,"low":9.06,"close":9.06,"prevclose":11.85,"week_52_high":0.0,"week_52_low":0.0,"bid":8.09,"bidsize":318,"bidexch":"N","bid_date":1522786497000,"ask":8.45,"asksize":236,"askexch":"X","ask_date":1522786499000,"open_interest":367,"underlying":"SPY","strike":269.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00261000","description":"SPY Apr 4 2018 $261.00 Call","exch":"Z","type":"option","last":1.25,"change":0.63,"change_percentage":101.62,"volume":38021,"average_volume":0,"last_volume":4,"trade_date":1522786473000,"open":0.85,"high":1.73,"low":0.34,"close":1.25,"prevclose":0.62,"week_52_high":0.0,"week_52_low":0.0,"bid":1.26,"bidsize":250,"bidexch":"P","bid_date":1522786499000,"ask":1.31,"asksize":250,"askexch":"P","ask_date":1522786499000,"open_interest":5880,"underlying":"SPY","strike":261.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00235000","description":"SPY Apr 4 2018 $235.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":25.57,"bidsize":198,"bidexch":"C","bid_date":1522786499000,"ask":25.94,"asksize":252,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":235.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00282000","description":"SPY Apr 4 2018 $282.00 Put","exch":"Z","type":"option","last":23.22,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":5,"trade_date":1522682800000,"open":null,"high":null,"low":null,"close":null,"prevclose":23.22,"week_52_high":0.0,"week_52_low":0.0,"bid":21.09,"bidsize":50,"bidexch":"N","bid_date":1522786497000,"ask":21.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":5,"underlying":"SPY","strike":282.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00256000","description":"SPY Apr 4 2018 $256.00 Put","exch":"Z","type":"option","last":0.25,"change":-1.47,"change_percentage":-85.47,"volume":69842,"average_volume":0,"last_volume":9,"trade_date":1522786455000,"open":0.87,"high":1.78,"low":0.24,"close":0.25,"prevclose":1.72,"week_52_high":0.0,"week_52_low":0.0,"bid":0.22,"bidsize":746,"bidexch":"X","bid_date":1522786499000,"ask":0.25,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":8191,"underlying":"SPY","strike":256.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00190000","description":"SPY Apr 4 2018 $190.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":20,"trade_date":1522353499000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":4029,"askexch":"X","ask_date":1522786499000,"open_interest":440,"underlying":"SPY","strike":190.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00222000","description":"SPY Apr 4 2018 $222.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":38.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":38.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":222.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00243000","description":"SPY Apr 4 2018 $243.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.14,"change_percentage":-93.34,"volume":570,"average_volume":0,"last_volume":100,"trade_date":1522785970000,"open":0.04,"high":0.06,"low":0.01,"close":0.01,"prevclose":0.15,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":597,"bidexch":"W","bid_date":1522785970000,"ask":0.02,"asksize":5209,"askexch":"X","ask_date":1522786499000,"open_interest":5889,"underlying":"SPY","strike":243.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00230000","description":"SPY Apr 4 2018 $230.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.03,"change_percentage":-75.0,"volume":70,"average_volume":0,"last_volume":10,"trade_date":1522770083000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2703,"askexch":"Q","ask_date":1522786499000,"open_interest":1077,"underlying":"SPY","strike":230.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00295000","description":"SPY Apr 4 2018 $295.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522777613000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3348,"askexch":"X","ask_date":1522786499000,"open_interest":777,"underlying":"SPY","strike":295.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00269000","description":"SPY Apr 4 2018 $269.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":2158,"average_volume":0,"last_volume":1,"trade_date":1522785873000,"open":0.01,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"C","bid_date":1522786480000,"ask":0.01,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":1851,"underlying":"SPY","strike":269.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00282000","description":"SPY Apr 4 2018 $282.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":125,"trade_date":1522340680000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3233,"askexch":"X","ask_date":1522786499000,"open_interest":9459,"underlying":"SPY","strike":282.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00256000","description":"SPY Apr 4 2018 $256.00 Call","exch":"Z","type":"option","last":4.72,"change":1.85,"change_percentage":64.46,"volume":1704,"average_volume":0,"last_volume":3,"trade_date":1522785906000,"open":3.73,"high":5.5,"low":2.69,"close":4.72,"prevclose":2.87,"week_52_high":0.0,"week_52_low":0.0,"bid":4.86,"bidsize":198,"bidexch":"X","bid_date":1522786495000,"ask":5.16,"asksize":50,"askexch":"N","ask_date":1522786496000,"open_interest":2453,"underlying":"SPY","strike":256.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00190000","description":"SPY Apr 4 2018 $190.00 Call","exch":"Z","type":"option","last":84.76,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":15,"trade_date":1521227660000,"open":null,"high":null,"low":null,"close":null,"prevclose":84.76,"week_52_high":0.0,"week_52_low":0.0,"bid":70.56,"bidsize":300,"bidexch":"C","bid_date":1522786496000,"ask":70.92,"asksize":281,"askexch":"C","ask_date":1522786496000,"open_interest":189,"underlying":"SPY","strike":190.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00277000","description":"SPY Apr 4 2018 $277.00 Put","exch":"Z","type":"option","last":16.75,"change":2.5,"change_percentage":17.55,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522782865000,"open":16.75,"high":16.75,"low":16.75,"close":16.75,"prevclose":14.25,"week_52_high":0.0,"week_52_low":0.0,"bid":16.09,"bidsize":243,"bidexch":"X","bid_date":1522786496000,"ask":16.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":22,"underlying":"SPY","strike":277.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00243000","description":"SPY Apr 4 2018 $243.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":17.57,"bidsize":226,"bidexch":"X","bid_date":1522786496000,"ask":17.93,"asksize":200,"askexch":"I","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":243.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00185000","description":"SPY Apr 4 2018 $185.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.01,"change_percentage":-50.0,"volume":5,"average_volume":0,"last_volume":5,"trade_date":1522762415000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.02,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3632,"askexch":"X","ask_date":1522786499000,"open_interest":19,"underlying":"SPY","strike":185.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00290000","description":"SPY Apr 4 2018 $290.00 Put","exch":"Z","type":"option","last":15.61,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1521046828000,"open":null,"high":null,"low":null,"close":null,"prevclose":15.61,"week_52_high":0.0,"week_52_low":0.0,"bid":29.09,"bidsize":299,"bidexch":"X","bid_date":1522786495000,"ask":29.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":290.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00264000","description":"SPY Apr 4 2018 $264.00 Put","exch":"Z","type":"option","last":3.83,"change":-2.91,"change_percentage":-43.18,"volume":346,"average_volume":0,"last_volume":1,"trade_date":1522785060000,"open":5.68,"high":7.18,"low":3.17,"close":3.83,"prevclose":6.74,"week_52_high":0.0,"week_52_low":0.0,"bid":3.37,"bidsize":97,"bidexch":"W","bid_date":1522786499000,"ask":3.56,"asksize":1,"askexch":"P","ask_date":1522786499000,"open_interest":1970,"underlying":"SPY","strike":264.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00238000","description":"SPY Apr 4 2018 $238.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.06,"change_percentage":-75.0,"volume":39,"average_volume":0,"last_volume":5,"trade_date":1522769804000,"open":0.03,"high":0.03,"low":0.02,"close":0.02,"prevclose":0.08,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2676,"askexch":"X","ask_date":1522786499000,"open_interest":19590,"underlying":"SPY","strike":238.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00230000","description":"SPY Apr 4 2018 $230.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":30.56,"bidsize":299,"bidexch":"X","bid_date":1522786495000,"ask":30.93,"asksize":200,"askexch":"I","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":230.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00251000","description":"SPY Apr 4 2018 $251.00 Put","exch":"Z","type":"option","last":0.04,"change":-0.43,"change_percentage":-91.49,"volume":24974,"average_volume":0,"last_volume":160,"trade_date":1522786392000,"open":0.18,"high":0.54,"low":0.03,"close":0.04,"prevclose":0.47,"week_52_high":0.0,"week_52_low":0.0,"bid":0.03,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.04,"asksize":3673,"askexch":"X","ask_date":1522786499000,"open_interest":3012,"underlying":"SPY","strike":251.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00225000","description":"SPY Apr 4 2018 $225.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.02,"change_percentage":-66.67,"volume":100,"average_volume":0,"last_volume":100,"trade_date":1522765986000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.03,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522784871000,"ask":0.01,"asksize":3462,"askexch":"X","ask_date":1522786499000,"open_interest":633,"underlying":"SPY","strike":225.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00277000","description":"SPY Apr 4 2018 $277.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":8,"average_volume":0,"last_volume":7,"trade_date":1522762674000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786476000,"ask":0.01,"asksize":3089,"askexch":"X","ask_date":1522786499000,"open_interest":3199,"underlying":"SPY","strike":277.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00185000","description":"SPY Apr 4 2018 $185.00 Call","exch":"Z","type":"option","last":89.65,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":15,"trade_date":1521228181000,"open":null,"high":null,"low":null,"close":null,"prevclose":89.65,"week_52_high":0.0,"week_52_low":0.0,"bid":75.57,"bidsize":300,"bidexch":"C","bid_date":1522786496000,"ask":75.92,"asksize":291,"askexch":"C","ask_date":1522786496000,"open_interest":222,"underlying":"SPY","strike":185.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00290000","description":"SPY Apr 4 2018 $290.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522698306000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3350,"askexch":"X","ask_date":1522786499000,"open_interest":479,"underlying":"SPY","strike":290.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00264000","description":"SPY Apr 4 2018 $264.00 Call","exch":"Z","type":"option","last":0.25,"change":0.09,"change_percentage":56.25,"volume":34999,"average_volume":0,"last_volume":5,"trade_date":1522786497000,"open":0.19,"high":0.45,"low":0.04,"close":0.25,"prevclose":0.16,"week_52_high":0.0,"week_52_low":0.0,"bid":0.23,"bidsize":825,"bidexch":"P","bid_date":1522786499000,"ask":0.26,"asksize":23,"askexch":"Z","ask_date":1522786499000,"open_interest":7312,"underlying":"SPY","strike":264.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00238000","description":"SPY Apr 4 2018 $238.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":22.58,"bidsize":68,"bidexch":"N","bid_date":1522786499000,"ask":22.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":238.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00285000","description":"SPY Apr 4 2018 $285.00 Put","exch":"Z","type":"option","last":21.62,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522088867000,"open":null,"high":null,"low":null,"close":null,"prevclose":21.62,"week_52_high":0.0,"week_52_low":0.0,"bid":24.08,"bidsize":299,"bidexch":"X","bid_date":1522786499000,"ask":24.44,"asksize":200,"askexch":"C","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":285.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00259000","description":"SPY Apr 4 2018 $259.00 Put","exch":"Z","type":"option","last":0.79,"change":-2.39,"change_percentage":-75.16,"volume":22089,"average_volume":0,"last_volume":1,"trade_date":1522786472000,"open":1.8900000000000001,"high":3.26,"low":0.75,"close":0.79,"prevclose":3.18,"week_52_high":0.0,"week_52_low":0.0,"bid":0.74,"bidsize":418,"bidexch":"X","bid_date":1522786499000,"ask":0.79,"asksize":400,"askexch":"P","ask_date":1522786499000,"open_interest":9449,"underlying":"SPY","strike":259.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00251000","description":"SPY Apr 4 2018 $251.00 Call","exch":"Z","type":"option","last":7.54,"change":1.6400000000000001,"change_percentage":27.8,"volume":5,"average_volume":0,"last_volume":3,"trade_date":1522774227000,"open":8.03,"high":8.03,"low":6.92,"close":7.54,"prevclose":5.9,"week_52_high":0.0,"week_52_low":0.0,"bid":9.61,"bidsize":288,"bidexch":"X","bid_date":1522786496000,"ask":9.96,"asksize":45,"askexch":"N","ask_date":1522786496000,"open_interest":151,"underlying":"SPY","strike":251.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00225000","description":"SPY Apr 4 2018 $225.00 Call","exch":"Z","type":"option","last":34.54,"change":4.04,"change_percentage":13.25,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522762200000,"open":34.54,"high":34.54,"low":34.54,"close":34.54,"prevclose":30.5,"week_52_high":0.0,"week_52_low":0.0,"bid":35.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":35.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":1,"underlying":"SPY","strike":225.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00272000","description":"SPY Apr 4 2018 $272.00 Put","exch":"Z","type":"option","last":14.34,"change":1.23,"change_percentage":9.3,"volume":9,"average_volume":0,"last_volume":3,"trade_date":1522780859000,"open":13.6,"high":14.34,"low":13.6,"close":14.34,"prevclose":13.12,"week_52_high":0.0,"week_52_low":0.0,"bid":11.09,"bidsize":297,"bidexch":"C","bid_date":1522786496000,"ask":11.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":212,"underlying":"SPY","strike":272.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00246000","description":"SPY Apr 4 2018 $246.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.1,"change_percentage":-83.34,"volume":3053,"average_volume":0,"last_volume":40,"trade_date":1522782920000,"open":0.06,"high":0.15,"low":0.02,"close":0.02,"prevclose":0.12,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786476000,"ask":0.01,"asksize":65,"askexch":"Z","ask_date":1522786498000,"open_interest":3142,"underlying":"SPY","strike":246.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00233000","description":"SPY Apr 4 2018 $233.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.03,"change_percentage":-75.0,"volume":23,"average_volume":0,"last_volume":3,"trade_date":1522768455000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2715,"askexch":"X","ask_date":1522786499000,"open_interest":1008,"underlying":"SPY","strike":233.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00220000","description":"SPY Apr 4 2018 $220.00 Put","exch":"Z","type":"option","last":0.05,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1522267518000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522776374000,"ask":0.01,"asksize":3495,"askexch":"X","ask_date":1522786499000,"open_interest":421,"underlying":"SPY","strike":220.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00285000","description":"SPY Apr 4 2018 $285.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":11,"average_volume":0,"last_volume":10,"trade_date":1522782378000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3313,"askexch":"X","ask_date":1522786499000,"open_interest":4127,"underlying":"SPY","strike":285.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00259000","description":"SPY Apr 4 2018 $259.00 Call","exch":"Z","type":"option","last":2.32,"change":1.03,"change_percentage":79.85,"volume":57704,"average_volume":0,"last_volume":2,"trade_date":1522786209000,"open":1.81,"high":3.05,"low":0.97,"close":2.32,"prevclose":1.29,"week_52_high":0.0,"week_52_low":0.0,"bid":2.51,"bidsize":20,"bidexch":"Q","bid_date":1522786499000,"ask":2.6,"asksize":20,"askexch":"Q","ask_date":1522786499000,"open_interest":7278,"underlying":"SPY","strike":259.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00272000","description":"SPY Apr 4 2018 $272.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":2,"average_volume":0,"last_volume":2,"trade_date":1522780277000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786476000,"ask":0.01,"asksize":4366,"askexch":"X","ask_date":1522786499000,"open_interest":5848,"underlying":"SPY","strike":272.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00246000","description":"SPY Apr 4 2018 $246.00 Call","exch":"Z","type":"option","last":15.79,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":8,"trade_date":1522253502000,"open":null,"high":null,"low":null,"close":null,"prevclose":15.79,"week_52_high":0.0,"week_52_low":0.0,"bid":14.57,"bidsize":203,"bidexch":"C","bid_date":1522786496000,"ask":14.93,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":8,"underlying":"SPY","strike":246.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00267000","description":"SPY Apr 4 2018 $267.00 Put","exch":"Z","type":"option","last":7.1,"change":-3.1,"change_percentage":-30.4,"volume":50,"average_volume":0,"last_volume":20,"trade_date":1522784202000,"open":6.41,"high":7.1,"low":6.4,"close":7.1,"prevclose":10.2,"week_52_high":0.0,"week_52_low":0.0,"bid":6.09,"bidsize":286,"bidexch":"N","bid_date":1522786498000,"ask":6.45,"asksize":242,"askexch":"C","ask_date":1522786499000,"open_interest":1163,"underlying":"SPY","strike":267.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00233000","description":"SPY Apr 4 2018 $233.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":27.57,"bidsize":45,"bidexch":"N","bid_date":1522786497000,"ask":27.93,"asksize":45,"askexch":"N","ask_date":1522786497000,"open_interest":0,"underlying":"SPY","strike":233.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00280000","description":"SPY Apr 4 2018 $280.00 Put","exch":"Z","type":"option","last":22.0,"change":9.3,"change_percentage":73.23,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522766226000,"open":22.0,"high":22.0,"low":22.0,"close":22.0,"prevclose":12.7,"week_52_high":0.0,"week_52_low":0.0,"bid":19.09,"bidsize":91,"bidexch":"N","bid_date":1522786497000,"ask":19.45,"asksize":200,"askexch":"I","ask_date":1522786495000,"open_interest":50,"underlying":"SPY","strike":280.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00254000","description":"SPY Apr 4 2018 $254.00 Put","exch":"Z","type":"option","last":0.11,"change":-0.99,"change_percentage":-89.91,"volume":14684,"average_volume":0,"last_volume":5,"trade_date":1522786418000,"open":0.46,"high":1.15,"low":0.11,"close":0.11,"prevclose":1.09,"week_52_high":0.0,"week_52_low":0.0,"bid":0.1,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.11,"asksize":30,"askexch":"E","ask_date":1522786495000,"open_interest":9168,"underlying":"SPY","strike":254.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00228000","description":"SPY Apr 4 2018 $228.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.04,"change_percentage":-80.0,"volume":20,"average_volume":0,"last_volume":20,"trade_date":1522762509000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3131,"askexch":"X","ask_date":1522786499000,"open_interest":2,"underlying":"SPY","strike":228.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00220000","description":"SPY Apr 4 2018 $220.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":40.56,"bidsize":300,"bidexch":"X","bid_date":1522786496000,"ask":40.93,"asksize":199,"askexch":"I","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":220.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00241000","description":"SPY Apr 4 2018 $241.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.1,"change_percentage":-90.91,"volume":354,"average_volume":0,"last_volume":100,"trade_date":1522784497000,"open":0.03,"high":0.03,"low":0.01,"close":0.01,"prevclose":0.11,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":755,"askexch":"X","ask_date":1522786499000,"open_interest":664,"underlying":"SPY","strike":241.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00215000","description":"SPY Apr 4 2018 $215.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":113,"trade_date":1522352694000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3497,"askexch":"X","ask_date":1522786499000,"open_interest":1209,"underlying":"SPY","strike":215.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00267000","description":"SPY Apr 4 2018 $267.00 Call","exch":"Z","type":"option","last":0.02,"change":-0.01,"change_percentage":-33.34,"volume":4324,"average_volume":0,"last_volume":15,"trade_date":1522785608000,"open":0.03,"high":0.04,"low":0.01,"close":0.02,"prevclose":0.03,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":1977,"bidexch":"X","bid_date":1522786500000,"ask":0.02,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":7145,"underlying":"SPY","strike":267.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00280000","description":"SPY Apr 4 2018 $280.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":3680,"average_volume":0,"last_volume":251,"trade_date":1522782744000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522782825000,"ask":0.01,"asksize":7483,"askexch":"X","ask_date":1522786499000,"open_interest":7950,"underlying":"SPY","strike":280.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00254000","description":"SPY Apr 4 2018 $254.00 Call","exch":"Z","type":"option","last":6.9,"change":2.58,"change_percentage":59.73,"volume":804,"average_volume":0,"last_volume":3,"trade_date":1522785584000,"open":5.35,"high":7.0,"low":4.35,"close":6.9,"prevclose":4.32,"week_52_high":0.0,"week_52_low":0.0,"bid":6.7,"bidsize":296,"bidexch":"C","bid_date":1522786499000,"ask":7.03,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":507,"underlying":"SPY","strike":254.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00228000","description":"SPY Apr 4 2018 $228.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":32.58,"bidsize":299,"bidexch":"X","bid_date":1522786499000,"ask":32.92,"asksize":200,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":228.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00275000","description":"SPY Apr 4 2018 $275.00 Put","exch":"Z","type":"option","last":14.85,"change":-0.66,"change_percentage":-4.2,"volume":2,"average_volume":0,"last_volume":1,"trade_date":1522784916000,"open":16.5,"high":16.5,"low":14.85,"close":14.85,"prevclose":15.5,"week_52_high":0.0,"week_52_low":0.0,"bid":14.09,"bidsize":347,"bidexch":"N","bid_date":1522786496000,"ask":14.45,"asksize":200,"askexch":"I","ask_date":1522786496000,"open_interest":1311,"underlying":"SPY","strike":275.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00249000","description":"SPY Apr 4 2018 $249.00 Put","exch":"Z","type":"option","last":0.02,"change":-0.25,"change_percentage":-92.31,"volume":2799,"average_volume":0,"last_volume":40,"trade_date":1522786053000,"open":0.13,"high":0.3,"low":0.02,"close":0.02,"prevclose":0.26,"week_52_high":0.0,"week_52_low":0.0,"bid":0.01,"bidsize":2375,"bidexch":"P","bid_date":1522786499000,"ask":0.02,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":2168,"underlying":"SPY","strike":249.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00241000","description":"SPY Apr 4 2018 $241.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":19.58,"bidsize":68,"bidexch":"N","bid_date":1522786499000,"ask":19.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":241.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00215000","description":"SPY Apr 4 2018 $215.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":45.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":45.92,"asksize":199,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":215.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00262000","description":"SPY Apr 4 2018 $262.00 Put","exch":"Z","type":"option","last":2.3,"change":-2.95,"change_percentage":-56.2,"volume":17894,"average_volume":0,"last_volume":7,"trade_date":1522786187000,"open":3.7,"high":5.4,"low":1.9100000000000001,"close":2.3,"prevclose":5.25,"week_52_high":0.0,"week_52_low":0.0,"bid":2.0,"bidsize":20,"bidexch":"Q","bid_date":1522786499000,"ask":2.12,"asksize":20,"askexch":"Q","ask_date":1522786499000,"open_interest":31869,"underlying":"SPY","strike":262.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00236000","description":"SPY Apr 4 2018 $236.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.04,"change_percentage":-80.0,"volume":135,"average_volume":0,"last_volume":5,"trade_date":1522785581000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2965,"askexch":"X","ask_date":1522786499000,"open_interest":8335,"underlying":"SPY","strike":236.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00223000","description":"SPY Apr 4 2018 $223.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.04,"change_percentage":-80.0,"volume":3,"average_volume":0,"last_volume":1,"trade_date":1522764538000,"open":0.02,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.05,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":3477,"askexch":"X","ask_date":1522786499000,"open_interest":10,"underlying":"SPY","strike":223.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00210000","description":"SPY Apr 4 2018 $210.00 Put","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":3,"trade_date":1522690489000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522767237000,"ask":0.01,"asksize":3604,"askexch":"X","ask_date":1522786499000,"open_interest":5450,"underlying":"SPY","strike":210.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00275000","description":"SPY Apr 4 2018 $275.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":94,"average_volume":0,"last_volume":1,"trade_date":1522777735000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"J","bid_date":1522777735000,"ask":0.01,"asksize":4078,"askexch":"X","ask_date":1522786499000,"open_interest":2105,"underlying":"SPY","strike":275.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00249000","description":"SPY Apr 4 2018 $249.00 Call","exch":"Z","type":"option","last":11.65,"change":4.02,"change_percentage":52.49,"volume":11,"average_volume":0,"last_volume":5,"trade_date":1522783486000,"open":10.06,"high":11.65,"low":10.06,"close":11.65,"prevclose":7.64,"week_52_high":0.0,"week_52_low":0.0,"bid":11.58,"bidsize":282,"bidexch":"X","bid_date":1522786495000,"ask":11.94,"asksize":45,"askexch":"N","ask_date":1522786495000,"open_interest":116,"underlying":"SPY","strike":249.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00262000","description":"SPY Apr 4 2018 $262.00 Call","exch":"Z","type":"option","last":0.83,"change":0.43,"change_percentage":107.5,"volume":29317,"average_volume":0,"last_volume":1,"trade_date":1522786499000,"open":0.5,"high":1.19,"low":0.17,"close":0.83,"prevclose":0.4,"week_52_high":0.0,"week_52_low":0.0,"bid":0.8,"bidsize":425,"bidexch":"P","bid_date":1522786499000,"ask":0.85,"asksize":325,"askexch":"P","ask_date":1522786499000,"open_interest":7212,"underlying":"SPY","strike":262.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00236000","description":"SPY Apr 4 2018 $236.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":24.58,"bidsize":45,"bidexch":"N","bid_date":1522786499000,"ask":24.93,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":236.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00283000","description":"SPY Apr 4 2018 $283.00 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":22.09,"bidsize":299,"bidexch":"X","bid_date":1522786495000,"ask":22.45,"asksize":200,"askexch":"X","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":283.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00257000","description":"SPY Apr 4 2018 $257.00 Put","exch":"Z","type":"option","last":0.36,"change":-1.75,"change_percentage":-82.86,"volume":33072,"average_volume":0,"last_volume":3,"trade_date":1522786488000,"open":1.26,"high":2.2,"low":0.36,"close":0.36,"prevclose":2.1,"week_52_high":0.0,"week_52_low":0.0,"bid":0.34,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.36,"asksize":30,"askexch":"E","ask_date":1522786499000,"open_interest":7944,"underlying":"SPY","strike":257.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00223000","description":"SPY Apr 4 2018 $223.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":37.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":37.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":223.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00270000","description":"SPY Apr 4 2018 $270.00 Put","exch":"Z","type":"option","last":9.5,"change":-2.9,"change_percentage":-23.33,"volume":59,"average_volume":0,"last_volume":2,"trade_date":1522784813000,"open":11.6,"high":11.8,"low":9.27,"close":9.5,"prevclose":12.39,"week_52_high":0.0,"week_52_low":0.0,"bid":9.09,"bidsize":316,"bidexch":"N","bid_date":1522786497000,"ask":9.45,"asksize":222,"askexch":"X","ask_date":1522786496000,"open_interest":885,"underlying":"SPY","strike":270.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00244000","description":"SPY Apr 4 2018 $244.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.07,"change_percentage":-85.72,"volume":702,"average_volume":0,"last_volume":10,"trade_date":1522784756000,"open":0.04,"high":0.09,"low":0.01,"close":0.01,"prevclose":0.07,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"T","bid_date":1522786470000,"ask":0.01,"asksize":611,"askexch":"H","ask_date":1522786499000,"open_interest":3919,"underlying":"SPY","strike":244.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00210000","description":"SPY Apr 4 2018 $210.00 Call","exch":"Z","type":"option","last":49.54,"change":-3.22,"change_percentage":-6.11,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522762200000,"open":49.54,"high":49.54,"low":49.54,"close":49.54,"prevclose":52.76,"week_52_high":0.0,"week_52_low":0.0,"bid":50.57,"bidsize":200,"bidexch":"I","bid_date":1522786499000,"ask":50.91,"asksize":45,"askexch":"N","ask_date":1522786499000,"open_interest":1,"underlying":"SPY","strike":210.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00231000","description":"SPY Apr 4 2018 $231.00 Put","exch":"Z","type":"option","last":0.01,"change":-0.05,"change_percentage":-83.34,"volume":20,"average_volume":0,"last_volume":20,"trade_date":1522763367000,"open":0.01,"high":0.01,"low":0.01,"close":0.01,"prevclose":0.06,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":2628,"askexch":"Q","ask_date":1522786499000,"open_interest":10,"underlying":"SPY","strike":231.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00205000","description":"SPY Apr 4 2018 $205.00 Put","exch":"Z","type":"option","last":0.02,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522694655000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.02,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522762209000,"ask":0.01,"asksize":3609,"askexch":"X","ask_date":1522786499000,"open_interest":718,"underlying":"SPY","strike":205.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00283000","description":"SPY Apr 4 2018 $283.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1522351936000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3347,"askexch":"X","ask_date":1522786499000,"open_interest":1031,"underlying":"SPY","strike":283.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00257000","description":"SPY Apr 4 2018 $257.00 Call","exch":"Z","type":"option","last":3.87,"change":1.63,"change_percentage":72.77,"volume":9311,"average_volume":0,"last_volume":1,"trade_date":1522786154000,"open":3.09,"high":4.68,"low":1.92,"close":3.87,"prevclose":2.24,"week_52_high":0.0,"week_52_low":0.0,"bid":4.05,"bidsize":10,"bidexch":"H","bid_date":1522786499000,"ask":4.24,"asksize":20,"askexch":"H","ask_date":1522786499000,"open_interest":3506,"underlying":"SPY","strike":257.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00278000","description":"SPY Apr 4 2018 $278.00 Put","exch":"Z","type":"option","last":11.54,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":1,"trade_date":1521744818000,"open":null,"high":null,"low":null,"close":null,"prevclose":11.54,"week_52_high":0.0,"week_52_low":0.0,"bid":17.09,"bidsize":49,"bidexch":"N","bid_date":1522786499000,"ask":17.45,"asksize":200,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":278.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00270000","description":"SPY Apr 4 2018 $270.00 Call","exch":"Z","type":"option","last":0.01,"change":0.0,"change_percentage":0.0,"volume":97,"average_volume":0,"last_volume":20,"trade_date":1522783553000,"open":0.02,"high":0.02,"low":0.01,"close":0.01,"prevclose":0.01,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786086000,"ask":0.01,"asksize":1909,"askexch":"X","ask_date":1522786499000,"open_interest":5106,"underlying":"SPY","strike":270.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00244000","description":"SPY Apr 4 2018 $244.00 Call","exch":"Z","type":"option","last":15.31,"change":2.38,"change_percentage":18.32,"volume":1,"average_volume":0,"last_volume":1,"trade_date":1522768422000,"open":15.31,"high":15.31,"low":15.31,"close":15.31,"prevclose":12.94,"week_52_high":0.0,"week_52_low":0.0,"bid":16.57,"bidsize":189,"bidexch":"X","bid_date":1522786495000,"ask":16.93,"asksize":200,"askexch":"I","ask_date":1522786495000,"open_interest":1,"underlying":"SPY","strike":244.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00265000","description":"SPY Apr 4 2018 $265.00 Put","exch":"Z","type":"option","last":4.38,"change":-3.33,"change_percentage":-43.2,"volume":222,"average_volume":0,"last_volume":20,"trade_date":1522783945000,"open":6.12,"high":7.66,"low":4.03,"close":4.38,"prevclose":7.71,"week_52_high":0.0,"week_52_low":0.0,"bid":4.19,"bidsize":321,"bidexch":"N","bid_date":1522786496000,"ask":4.53,"asksize":277,"askexch":"X","ask_date":1522786499000,"open_interest":3168,"underlying":"SPY","strike":265.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00239000","description":"SPY Apr 4 2018 $239.00 Put","exch":"Z","type":"option","last":0.03,"change":-0.03,"change_percentage":-50.0,"volume":20,"average_volume":0,"last_volume":10,"trade_date":1522764574000,"open":0.02,"high":0.03,"low":0.02,"close":0.03,"prevclose":0.06,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":1375,"askexch":"P","ask_date":1522786499000,"open_interest":14081,"underlying":"SPY","strike":239.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00231000","description":"SPY Apr 4 2018 $231.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":29.58,"bidsize":299,"bidexch":"X","bid_date":1522786499000,"ask":29.92,"asksize":200,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":231.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00205000","description":"SPY Apr 4 2018 $205.00 Call","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":55.58,"bidsize":200,"bidexch":"C","bid_date":1522786499000,"ask":55.92,"asksize":199,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":205.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00252000","description":"SPY Apr 4 2018 $252.00 Put","exch":"Z","type":"option","last":0.05,"change":-0.59,"change_percentage":-92.19,"volume":15056,"average_volume":0,"last_volume":2,"trade_date":1522786437000,"open":0.21,"high":0.69,"low":0.05,"close":0.05,"prevclose":0.64,"week_52_high":0.0,"week_52_low":0.0,"bid":0.04,"bidsize":684,"bidexch":"X","bid_date":1522786499000,"ask":0.05,"asksize":1073,"askexch":"X","ask_date":1522786499000,"open_interest":4073,"underlying":"SPY","strike":252.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00226000","description":"SPY Apr 4 2018 $226.00 Put","exch":"Z","type":"option","last":0.04,"change":0.0,"change_percentage":0.0,"volume":0,"average_volume":0,"last_volume":10,"trade_date":1522698134000,"open":null,"high":null,"low":null,"close":null,"prevclose":0.04,"week_52_high":0.0,"week_52_low":0.0,"bid":0.0,"bidsize":0,"bidexch":"B","bid_date":1522786470000,"ask":0.01,"asksize":3414,"askexch":"X","ask_date":1522786499000,"open_interest":205,"underlying":"SPY","strike":226.0,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00252500","description":"SPY Apr 4 2018 $252.50 Call","exch":"Z","type":"option","last":5.85,"change":null,"change_percentage":null,"volume":46,"average_volume":0,"last_volume":10,"trade_date":1522781205000,"open":5.59,"high":6.58,"low":5.59,"close":5.85,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":8.14,"bidsize":233,"bidexch":"X","bid_date":1522786496000,"ask":8.5,"asksize":200,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":252.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00260500","description":"SPY Apr 4 2018 $260.50 Call","exch":"Z","type":"option","last":1.49,"change":null,"change_percentage":null,"volume":7795,"average_volume":0,"last_volume":5,"trade_date":1522786330000,"open":1.0,"high":2.03,"low":0.47,"close":1.49,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":1.53,"bidsize":250,"bidexch":"P","bid_date":1522786499000,"ask":1.5699999999999998,"asksize":250,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":260.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00252500","description":"SPY Apr 4 2018 $252.50 Put","exch":"Z","type":"option","last":0.06,"change":null,"change_percentage":null,"volume":1081,"average_volume":0,"last_volume":20,"trade_date":1522786489000,"open":0.35,"high":0.79,"low":0.06,"close":0.06,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.05,"bidsize":716,"bidexch":"X","bid_date":1522786499000,"ask":0.06,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":252.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00260500","description":"SPY Apr 4 2018 $260.50 Put","exch":"Z","type":"option","last":1.31,"change":null,"change_percentage":null,"volume":1595,"average_volume":0,"last_volume":25,"trade_date":1522786464000,"open":2.82,"high":4.04,"low":1.24,"close":1.31,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":1.26,"bidsize":275,"bidexch":"P","bid_date":1522786499000,"ask":1.29,"asksize":275,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":260.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00253500","description":"SPY Apr 4 2018 $253.50 Call","exch":"Z","type":"option","last":5.58,"change":null,"change_percentage":null,"volume":72,"average_volume":0,"last_volume":1,"trade_date":1522781323000,"open":4.78,"high":5.67,"low":4.71,"close":5.58,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":7.18,"bidsize":227,"bidexch":"X","bid_date":1522786495000,"ask":7.53,"asksize":265,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":253.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00261500","description":"SPY Apr 4 2018 $261.50 Call","exch":"Z","type":"option","last":1.02,"change":null,"change_percentage":null,"volume":5069,"average_volume":0,"last_volume":1,"trade_date":1522786473000,"open":0.75,"high":1.44,"low":0.26,"close":1.02,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":1.03,"bidsize":300,"bidexch":"P","bid_date":1522786499000,"ask":1.06,"asksize":300,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":261.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00253500","description":"SPY Apr 4 2018 $253.50 Put","exch":"Z","type":"option","last":0.11,"change":null,"change_percentage":null,"volume":2218,"average_volume":0,"last_volume":2,"trade_date":1522786124000,"open":0.47,"high":0.94,"low":0.09,"close":0.11,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.08,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.09,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":253.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00261500","description":"SPY Apr 4 2018 $261.50 Put","exch":"Z","type":"option","last":1.92,"change":null,"change_percentage":null,"volume":473,"average_volume":0,"last_volume":5,"trade_date":1522785071000,"open":4.5,"high":4.5,"low":1.7,"close":1.92,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":1.71,"bidsize":99,"bidexch":"W","bid_date":1522786499000,"ask":1.8199999999999998,"asksize":51,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":261.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00254500","description":"SPY Apr 4 2018 $254.50 Call","exch":"Z","type":"option","last":5.96,"change":null,"change_percentage":null,"volume":131,"average_volume":0,"last_volume":6,"trade_date":1522782256000,"open":5.04,"high":5.96,"low":3.88,"close":5.96,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":6.23,"bidsize":208,"bidexch":"X","bid_date":1522786497000,"ask":6.57,"asksize":278,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":254.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00262500","description":"SPY Apr 4 2018 $262.50 Call","exch":"Z","type":"option","last":0.64,"change":null,"change_percentage":null,"volume":12362,"average_volume":0,"last_volume":30,"trade_date":1522786476000,"open":0.42,"high":0.96,"low":0.12,"close":0.64,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.64,"bidsize":375,"bidexch":"P","bid_date":1522786499000,"ask":0.66,"asksize":10,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":262.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00254500","description":"SPY Apr 4 2018 $254.50 Put","exch":"Z","type":"option","last":0.15,"change":null,"change_percentage":null,"volume":8710,"average_volume":0,"last_volume":10,"trade_date":1522785876000,"open":0.6,"high":1.27,"low":0.14,"close":0.15,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.12,"bidsize":967,"bidexch":"X","bid_date":1522786499000,"ask":0.13,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":254.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00262500","description":"SPY Apr 4 2018 $262.50 Put","exch":"Z","type":"option","last":2.7199999999999998,"change":null,"change_percentage":null,"volume":624,"average_volume":0,"last_volume":17,"trade_date":1522785282000,"open":4.29,"high":5.26,"low":2.18,"close":2.7199999999999998,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":2.29,"bidsize":98,"bidexch":"W","bid_date":1522786499000,"ask":2.44,"asksize":10,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":262.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00255500","description":"SPY Apr 4 2018 $255.50 Call","exch":"Z","type":"option","last":5.07,"change":null,"change_percentage":null,"volume":330,"average_volume":0,"last_volume":1,"trade_date":1522784698000,"open":3.4699999999999998,"high":5.07,"low":3.11,"close":5.07,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":5.32,"bidsize":198,"bidexch":"I","bid_date":1522786499000,"ask":5.61,"asksize":200,"askexch":"C","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":255.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00263500","description":"SPY Apr 4 2018 $263.50 Call","exch":"Z","type":"option","last":0.35,"change":null,"change_percentage":null,"volume":9814,"average_volume":0,"last_volume":4,"trade_date":1522786499000,"open":0.27,"high":0.57,"low":0.05,"close":0.35,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.35,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.37,"asksize":20,"askexch":"Z","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":263.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00255500","description":"SPY Apr 4 2018 $255.50 Put","exch":"Z","type":"option","last":0.19,"change":null,"change_percentage":null,"volume":5489,"average_volume":0,"last_volume":2,"trade_date":1522786497000,"open":0.78,"high":1.5899999999999999,"low":0.17,"close":0.19,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.18,"bidsize":729,"bidexch":"X","bid_date":1522786499000,"ask":0.2,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":255.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00263500","description":"SPY Apr 4 2018 $263.50 Put","exch":"Z","type":"option","last":3.1,"change":null,"change_percentage":null,"volume":275,"average_volume":0,"last_volume":2,"trade_date":1522785527000,"open":4.45,"high":4.45,"low":2.85,"close":3.1,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":3.06,"bidsize":20,"bidexch":"P","bid_date":1522786481000,"ask":3.15,"asksize":10,"askexch":"I","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":263.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00256500","description":"SPY Apr 4 2018 $256.50 Call","exch":"Z","type":"option","last":4.21,"change":null,"change_percentage":null,"volume":683,"average_volume":0,"last_volume":10,"trade_date":1522784698000,"open":3.27,"high":5.02,"low":2.3,"close":4.21,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":4.48,"bidsize":10,"bidexch":"H","bid_date":1522786499000,"ask":4.67,"asksize":1,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":256.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00264500","description":"SPY Apr 4 2018 $264.50 Call","exch":"Z","type":"option","last":0.15,"change":null,"change_percentage":null,"volume":3994,"average_volume":0,"last_volume":1,"trade_date":1522786273000,"open":0.19,"high":0.32,"low":0.03,"close":0.15,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.17,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.18,"asksize":27,"askexch":"Z","ask_date":1522786498000,"open_interest":0,"underlying":"SPY","strike":264.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00256500","description":"SPY Apr 4 2018 $256.50 Put","exch":"Z","type":"option","last":0.35,"change":null,"change_percentage":null,"volume":4903,"average_volume":0,"last_volume":3,"trade_date":1522786166000,"open":1.0,"high":1.96,"low":0.29,"close":0.35,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.28,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.3,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":256.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00264500","description":"SPY Apr 4 2018 $264.50 Put","exch":"Z","type":"option","last":4.07,"change":null,"change_percentage":null,"volume":145,"average_volume":0,"last_volume":1,"trade_date":1522784796000,"open":3.66,"high":4.26,"low":3.57,"close":4.07,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":3.75,"bidsize":209,"bidexch":"X","bid_date":1522786499000,"ask":4.08,"asksize":280,"askexch":"X","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":264.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00257500","description":"SPY Apr 4 2018 $257.50 Call","exch":"Z","type":"option","last":3.75,"change":null,"change_percentage":null,"volume":3032,"average_volume":0,"last_volume":5,"trade_date":1522785575000,"open":2.6,"high":4.09,"low":1.71,"close":3.75,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":3.64,"bidsize":1,"bidexch":"P","bid_date":1522786499000,"ask":3.82,"asksize":50,"askexch":"W","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":257.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404C00265500","description":"SPY Apr 4 2018 $265.50 Call","exch":"Z","type":"option","last":0.08,"change":null,"change_percentage":null,"volume":5218,"average_volume":0,"last_volume":94,"trade_date":1522786400000,"open":0.06,"high":0.13,"low":0.02,"close":0.08,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.07,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.08,"asksize":2079,"askexch":"W","ask_date":1522786495000,"open_interest":0,"underlying":"SPY","strike":265.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00257500","description":"SPY Apr 4 2018 $257.50 Put","exch":"Z","type":"option","last":0.45,"change":null,"change_percentage":null,"volume":10097,"average_volume":0,"last_volume":2,"trade_date":1522786497000,"open":1.41,"high":2.43,"low":0.43,"close":0.45,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.42,"bidsize":625,"bidexch":"P","bid_date":1522786499000,"ask":0.45,"asksize":625,"askexch":"P","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":257.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404P00265500","description":"SPY Apr 4 2018 $265.50 Put","exch":"Z","type":"option","last":null,"change":null,"change_percentage":null,"volume":0,"average_volume":0,"last_volume":0,"trade_date":0,"open":null,"high":null,"low":null,"close":null,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":4.65,"bidsize":186,"bidexch":"I","bid_date":1522786495000,"ask":5.0,"asksize":224,"askexch":"X","ask_date":1522786496000,"open_interest":0,"underlying":"SPY","strike":265.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00258500","description":"SPY Apr 4 2018 $258.50 Call","exch":"Z","type":"option","last":2.7,"change":null,"change_percentage":null,"volume":8009,"average_volume":0,"last_volume":25,"trade_date":1522786134000,"open":2.09,"high":3.39,"low":1.15,"close":2.7,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":2.86,"bidsize":10,"bidexch":"I","bid_date":1522786499000,"ask":3.01,"asksize":50,"askexch":"W","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":258.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00258500","description":"SPY Apr 4 2018 $258.50 Put","exch":"Z","type":"option","last":0.66,"change":null,"change_percentage":null,"volume":9056,"average_volume":0,"last_volume":5,"trade_date":1522786480000,"open":1.77,"high":2.95,"low":0.65,"close":0.66,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.63,"bidsize":525,"bidexch":"P","bid_date":1522786499000,"ask":0.65,"asksize":30,"askexch":"E","ask_date":1522786497000,"open_interest":0,"underlying":"SPY","strike":258.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"},{"symbol":"SPY180404C00259500","description":"SPY Apr 4 2018 $259.50 Call","exch":"Z","type":"option","last":2.02,"change":null,"change_percentage":null,"volume":8183,"average_volume":0,"last_volume":7,"trade_date":1522786253000,"open":1.44,"high":2.63,"low":0.75,"close":2.02,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":2.14,"bidsize":10,"bidexch":"I","bid_date":1522786499000,"ask":2.27,"asksize":47,"askexch":"N","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":259.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"call","root_symbol":"SPY"},{"symbol":"SPY180404P00259500","description":"SPY Apr 4 2018 $259.50 Put","exch":"Z","type":"option","last":1.0,"change":null,"change_percentage":null,"volume":4884,"average_volume":0,"last_volume":1,"trade_date":1522786329000,"open":2.37,"high":3.36,"low":0.91,"close":1.0,"prevclose":null,"week_52_high":0.0,"week_52_low":0.0,"bid":0.89,"bidsize":408,"bidexch":"X","bid_date":1522786499000,"ask":0.92,"asksize":30,"askexch":"E","ask_date":1522786499000,"open_interest":0,"underlying":"SPY","strike":259.5,"contract_size":100,"expiration_date":"2018-04-04","expiration_type":"weeklys","option_type":"put","root_symbol":"SPY"}]}}`)

	// Start the db connection.
	db, _ := models.NewDB()

	// Create controller
	c := &Controller{DB: db}

	// Make a mock request.
	req, _ := http.NewRequest("GET", "/api/v1/quotes/options/chain/spy/2018-04-04", nil)
	req.Header.Set("Accept", "application/json")

	// Setup GIN Router
	gin.SetMode("release")
	gin.DisableConsoleColor()
	r := gin.New()
	r.Use(func(c *gin.Context) { c.Set("userId", uint(1)) })
	r.GET("/api/v1/quotes/options/chain/:symb/:expire", c.GetOptionsChainByExpiration)

	// Setup writer.
	w := httptest.NewRecorder()
	r.ServeHTTP(w, req)

	// Convert Json
	chain := types.OptionsChain{}
	err := json.Unmarshal([]byte(w.Body.String()), &chain)

	// Test result
	st.Expect(t, err, nil)
	st.Expect(t, chain.Underlying, "SPY")
	st.Expect(t, chain.ExpirationDate.Format("2006-01-02"), "2018-04-04")
	st.Expect(t, len(chain.Puts), 90)
	st.Expect(t, len(chain.Calls), 90)
	st.Expect(t, chain.Puts[0].ExpirationDate.Format("2006-01-02"), "2018-04-04")
	st.Expect(t, chain.Calls[0].ExpirationDate.Format("2006-01-02"), "2018-04-04")
	st.Expect(t, chain.Puts[25].Symbol, "SPY180404P00227000")
	st.Expect(t, chain.Calls[24].Symbol, "SPY180404C00271000")
}

//
// Test - GetOptionsStikesBySymbolExpiration
//
func TestGetOptionsStikesBySymbolExpiration01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New("https://api.tradier.com/v1").
		Get("/markets/options/strikes").
		Reply(200).
		BodyString(`{"strikes":{"strike":[100.0,105.0,110.0,115.0,120.0,125.0,130.0,135.0,140.0,145.0,150.0,155.0,156.0,157.0,158.0,159.0,160.0,161.0,162.0,163.0,164.0,165.0,166.0,167.0,168.0,169.0,170.0,171.0,172.0,173.0,174.0,175.0,176.0,177.0,178.0,179.0,180.0,181.0,182.0,183.0,184.0,185.0,186.0,187.0,188.0,189.0,190.0,191.0,192.0,193.0,194.0,195.0,196.0,197.0,198.0,199.0,200.0,201.0,202.0,203.0,204.0,205.0,206.0,207.0,208.0,209.0,210.0,211.0,212.0,213.0,214.0,215.0,216.0,217.0,218.0,219.0,220.0,221.0,222.0,223.0,224.0,225.0,226.0,227.0,228.0,229.0,230.0,231.0,232.0,233.0,234.0,235.0,236.0,237.0,238.0,239.0,240.0,241.0,242.0,243.0,244.0,245.0,246.0,247.0,247.5,248.0,249.0,250.0,251.0,252.0,252.5,253.0,253.5,254.0,254.5,255.0,255.5,256.0,256.5,257.0,257.5,258.0,258.5,259.0,259.5,260.0,260.5,261.0,261.5,262.0,262.5,263.0,264.0,265.0,266.0,267.0,267.5,268.0,269.0,270.0,270.5,271.0,271.5,272.0,272.5,273.0,273.5,274.0,274.5,275.0,275.5,276.0,276.5,277.0,277.5,278.0,278.5,279.0,279.5,280.0,280.5,281.0,281.5,282.0,282.5,283.0,283.5,284.0,284.5,285.0,286.0,287.0,287.5,288.0,289.0,290.0,291.0,292.0,292.5,293.0,294.0,295.0,296.0,297.0,297.5,298.0,299.0,300.0,301.0,302.0,302.5,303.0,304.0,305.0,306.0,307.0,308.0,309.0,310.0,311.0,312.0,313.0,314.0,315.0,316.0,317.0,318.0,319.0,320.0,325.0,330.0,335.0,340.0,345.0,350.0,355.0,360.0,365.0,370.0]}}`)

	// Create controller
	c := &Controller{}

	// Make a mock request.
	req, _ := http.NewRequest("GET", "/api/v1/quotes/options/strikes/spy/2018-04-20", nil)
	req.Header.Set("Accept", "application/json")

	// Setup GIN Router
	gin.SetMode("release")
	gin.DisableConsoleColor()
	r := gin.New()
	r.Use(func(c *gin.Context) { c.Set("userId", uint(1)) })
	r.GET("/api/v1/quotes/options/strikes/:symb/:expire", c.GetOptionsStikesBySymbolExpiration)

	// Setup writer.
	w := httptest.NewRecorder()
	r.ServeHTTP(w, req)

	var strikes []float64

	err := json.Unmarshal([]byte(w.Body.String()), &strikes)

	// Parse json that returned.
	st.Expect(t, err, nil)
	st.Expect(t, len(strikes), 219)
	st.Expect(t, strikes[0], float64(100.00))
	st.Expect(t, strikes[3], float64(115.00))
	st.Expect(t, strikes[33], float64(177.00))
}

//
// Test - GetOptionsExpirations
//
func TestGetOptionsExpirations01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New("https://api.tradier.com/v1").
		Get("/markets/options/expirations").
		Reply(200).
		BodyString(`{"expirations":{"date":["2018-04-04","2018-04-06","2018-04-09","2018-04-11","2018-04-13","2018-04-16","2018-04-18","2018-04-20","2018-04-23","2018-04-25","2018-04-27","2018-04-30","2018-05-02","2018-05-04","2018-05-07","2018-05-09","2018-05-11","2018-05-18","2018-06-15","2018-06-29","2018-07-20","2018-09-21","2018-09-28","2018-12-21","2018-12-31","2019-01-18","2019-03-15","2019-03-29","2019-06-21","2019-09-20","2019-12-20","2020-01-17","2020-03-20","2020-12-18"]}}`)

	// Create controller
	c := &Controller{}

	// Make a mock request.
	req, _ := http.NewRequest("GET", "/quotes/options/expirations/spy", nil)
	req.Header.Set("Accept", "application/json")

	// Setup GIN Router
	gin.SetMode("release")
	gin.DisableConsoleColor()
	r := gin.New()
	r.Use(func(c *gin.Context) { c.Set("userId", uint(1)) })
	r.GET("/quotes/options/expirations/:symb", c.GetOptionsExpirations)

	// Setup writer.
	w := httptest.NewRecorder()
	r.ServeHTTP(w, req)

	var dates []string

	err := json.Unmarshal([]byte(w.Body.String()), &dates)

	// Parse json that returned.
	st.Expect(t, err, nil)
	st.Expect(t, len(dates), 34)
	st.Expect(t, dates[0], "2018-04-04")
	st.Expect(t, dates[3], "2018-04-11")
	st.Expect(t, dates[33], "2020-12-18")
}

//
// Test - GetHistoricalQuotes
//
func TestGetHistoricalQuotes01(t *testing.T) {

	// Flush pending mocks after test execution
	defer gock.Off()

	// Setup mock request.
	gock.New("https://api.tradier.com/v1").
		Get("/markets/history").
		Reply(200).
		BodyString(`{"history":{"day":[{"date":"2018-01-02","open":267.84,"high":268.81,"low":267.4,"close":268.77,"volume":86631393},{"date":"2018-01-03","open":268.96,"high":270.64,"low":268.96,"close":270.47,"volume":90054249},{"date":"2018-01-04","open":271.2,"high":272.16,"low":270.5447,"close":271.61,"volume":80624896},{"date":"2018-01-05","open":272.51,"high":273.56,"low":271.95,"close":273.42,"volume":83522436},{"date":"2018-01-08","open":273.31,"high":274.1,"low":272.98,"close":273.92,"volume":57310300},{"date":"2018-01-09","open":274.4,"high":275.25,"low":274.081,"close":274.54,"volume":57245653},{"date":"2018-01-10","open":273.68,"high":274.42,"low":272.92,"close":274.12,"volume":69543174},{"date":"2018-01-11","open":274.75,"high":276.12,"low":274.56,"close":276.12,"volume":62357781},{"date":"2018-01-12","open":276.42,"high":278.11,"low":276.0819,"close":277.92,"volume":90807258},{"date":"2018-01-16","open":279.35,"high":280.09,"low":276.18,"close":276.97,"volume":106532827},{"date":"2018-01-17","open":278.03,"high":280.05,"low":276.97,"close":279.61,"volume":113242394},{"date":"2018-01-18","open":279.48,"high":279.96,"low":278.58,"close":279.14,"volume":100723726},{"date":"2018-01-19","open":279.8,"high":280.41,"low":279.14,"close":280.41,"volume":140912870},{"date":"2018-01-22","open":280.17,"high":282.69,"low":280.11,"close":282.69,"volume":91302336},{"date":"2018-01-23","open":282.74,"high":283.62,"low":282.37,"close":283.29,"volume":97073068},{"date":"2018-01-24","open":284.02,"high":284.7,"low":281.84,"close":283.18,"volume":134821100},{"date":"2018-01-25","open":284.16,"high":284.27,"low":282.405,"close":283.3,"volume":84573237},{"date":"2018-01-26","open":284.25,"high":286.6285,"low":283.96,"close":286.58,"volume":107729783},{"date":"2018-01-29","open":285.93,"high":286.43,"low":284.5,"close":284.68,"volume":90100642},{"date":"2018-01-30","open":282.6,"high":284.736,"low":281.22,"close":281.76,"volume":131751380},{"date":"2018-01-31","open":282.73,"high":283.3,"low":280.68,"close":281.9,"volume":118923457},{"date":"2018-02-01","open":281.07,"high":283.06,"low":280.68,"close":281.58,"volume":90083692},{"date":"2018-02-02","open":280.08,"high":280.23,"low":275.41,"close":275.45,"volume":173164270},{"date":"2018-02-05","open":273.45,"high":275.85,"low":263.31,"close":263.93,"volume":294568480},{"date":"2018-02-06","open":259.94,"high":269.7,"low":258.7,"close":269.13,"volume":355018200},{"date":"2018-02-07","open":268.5,"high":272.36,"low":267.58,"close":267.67,"volume":167241140},{"date":"2018-02-08","open":268.01,"high":268.17,"low":257.59,"close":257.63,"volume":246397060},{"date":"2018-02-09","open":260.8,"high":263.61,"low":252.92,"close":261.5,"volume":283490830},{"date":"2018-02-12","open":263.83,"high":267.01,"low":261.6644,"close":265.34,"volume":143725730},{"date":"2018-02-13","open":263.97,"high":266.62,"low":263.31,"close":266.0,"volume":81210909},{"date":"2018-02-14","open":264.31,"high":270.0,"low":264.3,"close":269.59,"volume":120683003},{"date":"2018-02-15","open":271.57,"high":273.04,"low":268.77,"close":273.03,"volume":111174904},{"date":"2018-02-16","open":272.32,"high":275.32,"low":272.27,"close":273.11,"volume":160417710},{"date":"2018-02-20","open":272.03,"high":273.67,"low":270.5,"close":271.4,"volume":86285058},{"date":"2018-02-21","open":271.9,"high":274.72,"low":269.94,"close":270.05,"volume":98714168},{"date":"2018-02-22","open":271.1,"high":273.05,"low":269.64,"close":270.4,"volume":110433492},{"date":"2018-02-23","open":271.79,"high":274.71,"low":271.25,"close":274.71,"volume":92753578}]}}`)

	// Start the db connection.
	db, _ := models.NewDB()

	// Create controller
	c := &Controller{DB: db}

	// Make a mock request.
	req, _ := http.NewRequest("GET", "/api/v1/quotes/historical?symbol=spy&end=2018-01-02&start=2017-01-01&interval=monthly", nil)
	req.Header.Set("Accept", "application/json")

	// Setup GIN Router
	gin.SetMode("release")
	gin.DisableConsoleColor()
	r := gin.New()
	r.Use(func(c *gin.Context) { c.Set("userId", uint(1)) })
	r.GET("/api/v1/quotes/historical", c.GetHistoricalQuotes)

	// Setup writer.
	w := httptest.NewRecorder()
	r.ServeHTTP(w, req)

	// Convert into object
	quotes := []types.HistoryQuote{}
	err := json.Unmarshal([]byte(w.Body.String()), &quotes)

	// Parse json that returned.
	st.Expect(t, err, nil)
	st.Expect(t, len(quotes), 37)
	st.Expect(t, quotes[0].Date.Format("2006-01-02"), "2018-01-02")
	st.Expect(t, quotes[0].Open, 267.84)
	st.Expect(t, quotes[0].High, 268.81)
	st.Expect(t, quotes[0].Low, 267.4)
	st.Expect(t, quotes[0].Close, 268.77)
	st.Expect(t, quotes[0].Volume, 86631393)
	st.Expect(t, quotes[36].Date.Format("2006-01-02"), "2018-02-23")
	st.Expect(t, quotes[36].Open, 271.79)
	st.Expect(t, quotes[36].High, 274.71)
	st.Expect(t, quotes[36].Low, 271.25)
	st.Expect(t, quotes[36].Close, 274.71)
	st.Expect(t, quotes[36].Volume, 92753578)
	st.Expect(t, gock.IsDone(), true)
}

/* End File */
