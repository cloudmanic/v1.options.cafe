<app-layout-sub-nav></app-layout-sub-nav>

<div class="content__inner">
  <div class="shell shell--fluid">
    <div class="article article--secondary">
      <div class="article__head article__head--secondary">
        <div class="article__head-group">
          <div class="select-container select-container--size1">
            <div class="select select--primary">
              <select name="field-profit">
                <option value="option-1" selected="">Profit & Loss</option>
              </select>
            </div>
          </div><!-- /.select-container -->

          <div class="select-container select-container--size2">
            <h6>Date Range</h6>
            
            <div class="select select--primary expanded hidden">
              <select name="field-date">
                <option value="option-1" selected="">Custom</option>

                <option value="option-2">Option 2</option>
              </select>

              <ul>
                <li>
                  <a href="#">This Month</a>
                </li>
                
                <li class="active">
                  <a href="#">Last Month</a>
                </li>
                
                <li>
                  <a href="#">Year to Date</a>
                </li>
                
                <li>
                  <a href="#">Last 1 Year</a>
                </li>
                
                <li>
                  <a href="#">Last 2 Years</a>
                </li>
                
                <li>
                  <a href="#">Last 5 Years</a>
                </li>
                
                <li>
                  <a href="#">Last 10 Years</a>
                </li>
                
                <li>
                  <a href="#">Custom Date Range</a>
                </li>
              </ul>
            </div>
          </div><!-- /.select-container -->

          <div class="field-container">
            <input type="text" class="field field--size1 js-date" placeholder="10/23/17" />

            <h6>To</h6>
            
            <input type="text" class="field field--size1 js-date" placeholder="10/23/17" />
          </div><!-- /.field-container -->
        </div><!-- /.article__head-group -->

        <div class="article__head-group">
          <div class="select-container select-container--size3">
            <h6>Group By</h6>
            
            <div class="select select--primary">
              <select name="groupBy" [(ngModel)]="groupBy" (change)="chartChange()">
                <option value="month">Month</option>
                <option value="year">Year</option>
                <option value="day">Day</option>                
              </select>
            </div>
          </div>

          <ul class="list-actions-alt">
            <li [ngClass]="{ 'active': (chartType == 'column') }">
              <a class="btn-square" (click)="setChartType('column')">
                <i class="ico-chart-2"></i>
              </a>
            </li>

            <li [ngClass]="{ 'active': (chartType == 'line') }">
              <a class="btn-square" (click)="setChartType('line')">
                <i class="ico-chart-1"></i>
              </a>
            </li>

          </ul>

<!--           <ul class="list-actions-alt list-actions-alt--primary">

            <li>
              <a href="#" class="btn btn--border btn--size3">
                <i class="ico-download"></i>

                CSV
              </a>
            </li>

            <li>
              <a href="#" class="btn btn--border btn--size3">
                <i class="ico-download"></i>
                
                PDF
              </a>
            </li>

          </ul> -->

        </div>
      </div>

      <div class="article__body">
        
        <div class="report">
          <highcharts-chart [Highcharts]="Highcharts" [constructorType]="chartConstructor" [options]="chartOptions" [(update)]="chartUpdateFlag" style="width: 100%; height: 500px; display: block;"></highcharts-chart>
        </div>

        <div class="table-simple table-simple--alt js-table">

          <table>
            <thead>
              <tr>
                <th class="hidden-desktop">Date</th>
                
                <th>
                  <ins>Profit & Loss</ins>
                </th>

                <th>
                  <ins># of Closing Trades</ins>
                </th>


                <th>
                  <ins>Commissions</ins>
                </th>


                <th>
                  <ins>Profit / Trade</ins>
                </th>

                <th>
                  <ins>Win Ratio</ins>
                </th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of listData;">
                <td>
                  <p *ngIf="groupBy == 'year'">{{ row.Date | date:'yyyy' }}</p>
                  <p *ngIf="groupBy == 'month'">{{ row.Date | date:'MM/yyyy' }}</p>
                  <p *ngIf="groupBy == 'day'">{{ row.Date | date:'shortDate' }}</p>
                </td>

                <td> 
                  <strong class="green" [ngClass]="{ 'green': (row.Profit > 0), 'red': (row.Profit < 0) }">{{ row.Profit | currency }}</strong>
                </td>

                <td>
                  <strong>{{ row.TradeCount }}</strong>
                </td>

                <td>
                  <strong>{{ row.Commissions | currency }}</strong>
                </td>

                <td>
                  <strong>{{ row.ProfitPerTrade | currency }}</strong>
                </td>

                <td>
                  <strong>{{ row.WinRatio | number:'1.2-2' }}%</strong>
                </td>
              </tr>

              <tr class="table-totals">
                <td>
                  <strong>Totals</strong>
                </td>

                <td> 
                  <strong>{{ getProfitTotal(listData) | currency }}</strong>
                </td>

                <td>
                  <strong>{{ getTradeTotal(listData) }}</strong>
                </td>

                <td>
                  <strong>{{ getCommissionsTotal(listData) | currency }}</strong>
                </td>

                <td>&nbsp;</td>

                <td>&nbsp;</td>
              </tr>              

            </tbody>
          </table>

        </div>
      </div>
    </div>

    <div class="section-small">
      <p>
        Curabitur eu dolor eu urna pretium dapibus. Praesent a euismod ex, in euismod risus. Aliquam ullamcorper lectus tempus feugiat facilisis. Vivamus ac semper felis. Fusce ut lacus accumsan, eleifend mi eget, placerat augue. Quisque pellentesque cursus ex eget molestie. Aenean varius lacus quis massa pharetra, vel tincidunt velit lobortis.
      </p>
    </div><!-- /.section-small -->

  </div><!-- /.shell shell-large -->
</div><!-- /.content__inner -->